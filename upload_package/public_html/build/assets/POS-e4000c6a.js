import{r as c,B as P,w as se,o as ye,a as n,d as _e,e as oe,b as e,t as l,c as a,g as h,v as H,j as p,k as C,q as M,F as j,y as J,h as we,K as ne}from"./app-ae183702.js";import{A as ke}from"./AppLayout-05834323.js";import{_ as Ce}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./ApplicationLogo-1b1778d1.js";/* empty css                                                                  */const je={class:"flex items-center justify-between"},Te={class:"hidden md:flex items-center space-x-4"},Me={class:"text-sm text-gray-600"},$e={class:"text-sm text-gray-600"},qe={class:"py-4 lg:py-6"},Se={class:"max-w-full mx-auto px-4 sm:px-6 lg:px-8"},Ae={class:"lg:hidden"},Pe={class:"bg-white rounded-lg shadow-md p-4 mb-4"},Fe={class:"flex items-center justify-between mb-4"},Ve={key:0,class:"mb-4"},Ee={class:"flex flex-wrap gap-2"},He=["onClick"],Be={class:"space-y-3 mb-20"},Le=["onClick"],Re={class:"flex items-center space-x-3"},ze={class:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center"},Oe=["src","alt"],Xe={key:1,class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ne={class:"flex-1"},Ie={class:"font-medium text-gray-900"},De={class:"text-sm text-gray-500"},Ue={class:"flex items-center justify-between mt-1"},Ke={class:"text-lg font-bold text-primary-600"},Ge={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50"},We={class:"flex items-center justify-between mb-2"},Je={class:"text-sm text-gray-600"},Qe={class:"text-lg font-bold text-primary-600"},Ye=["disabled"],Ze={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end"},et={class:"bg-white w-full max-h-[80vh] rounded-t-xl overflow-hidden"},tt={class:"p-4 border-b border-gray-200"},st={class:"flex items-center justify-between"},ot={class:"p-4 overflow-y-auto max-h-96"},nt={key:0,class:"text-center py-8 text-gray-500"},lt={key:1,class:"space-y-3"},at={class:"flex-1"},rt={class:"font-medium"},it={class:"text-sm text-gray-500"},dt={class:"flex items-center space-x-2"},ut=["onClick"],ct={class:"w-8 text-center"},vt=["onClick"],pt=["onClick"],mt={class:"p-4 border-t border-gray-200"},ft={class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},gt={class:"flex items-center justify-between"},xt={class:"relative inline-flex items-center cursor-pointer"},bt={class:"space-y-2 mb-4"},ht={class:"flex justify-between text-sm"},yt={key:0,class:"flex justify-between text-sm"},_t={class:"flex justify-between font-bold text-lg border-t pt-2"},wt={class:"text-primary-600"},kt={class:"flex space-x-2"},Ct={class:"hidden lg:grid lg:grid-cols-12 lg:gap-6"},jt={class:"lg:col-span-8"},Tt={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$t={class:"relative"},qt={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-40 overflow-y-auto"},St=["onClick"],At={class:"font-medium"},Pt={class:"text-sm text-gray-500"},Ft={class:"text-sm text-gray-500"},Vt={key:0,class:"p-3 bg-blue-50 rounded-lg border border-blue-200"},Et={class:"flex items-center justify-between"},Ht={class:"flex-1"},Bt={class:"font-medium text-blue-900"},Lt={class:"text-sm text-blue-700"},Rt={class:"text-sm text-blue-700"},zt={class:"text-xs text-blue-600 mt-1"},Ot={key:1,class:"p-3 bg-gray-50 rounded-lg border border-gray-200"},Xt={class:"bg-white rounded-lg shadow-md p-6 mb-6"},Nt={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0"},It={class:"flex-1 lg:mr-4"},Dt={class:"relative"},Ut={class:"flex space-x-2"},Kt=["value"],Gt={class:"bg-white rounded-lg shadow-md p-6"},Wt={class:"grid grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4"},Jt=["onClick"],Qt={class:"aspect-square bg-gray-200 rounded-lg mb-3 flex items-center justify-center overflow-hidden"},Yt=["src","alt"],Zt={key:1,class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},es={class:"font-medium text-gray-900 text-sm mb-1 line-clamp-2"},ts={class:"text-xs text-gray-500 mb-2"},ss={class:"flex items-center justify-between"},os={class:"text-lg font-bold text-primary-600"},ns={key:0,class:"text-center py-8"},ls={key:1,class:"text-center py-8 text-gray-500"},as={class:"lg:col-span-4"},rs={class:"bg-white rounded-lg shadow-md p-6 sticky top-6"},is={class:"space-y-3 mb-6 max-h-96 overflow-y-auto"},ds={key:0,class:"text-center py-8 text-gray-500"},us={class:"flex-1"},cs={class:"font-medium text-sm"},vs={class:"text-sm text-gray-500"},ps={class:"flex items-center space-x-2"},ms=["onClick"],fs={class:"w-8 text-center text-sm"},gs=["onClick"],xs=["onClick"],bs={class:"border-t pt-4"},hs={class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},ys={class:"flex items-center justify-between"},_s={class:"relative inline-flex items-center cursor-pointer"},ws={class:"space-y-2 mb-4"},ks={class:"flex justify-between text-sm"},Cs={key:0,class:"flex justify-between text-sm text-green-600"},js={key:1,class:"flex justify-between text-sm"},Ts={class:"flex justify-between font-bold text-lg border-t pt-2"},Ms={class:"text-primary-600"},$s={class:"space-y-2"},qs=["disabled"],Ss=["disabled"],As={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Ps={class:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto"},Fs={class:"p-6"},Vs={class:"mb-6 p-4 bg-gray-50 rounded-lg"},Es={class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},Hs={class:"flex items-center justify-between"},Bs={class:"relative inline-flex items-center cursor-pointer"},Ls={class:"space-y-1 text-sm"},Rs={class:"flex justify-between"},zs={class:"flex justify-between"},Os={key:0,class:"flex justify-between text-green-600"},Xs={key:1,class:"flex justify-between"},Ns={class:"flex justify-between font-bold text-lg border-t pt-1"},Is={class:"text-primary-600"},Ds={key:0,class:"mb-6"},Us={class:"space-y-2"},Ks=["onClick"],Gs={class:"flex items-center"},Ws={class:"flex-shrink-0 mr-3"},Js={key:0,class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},Qs={key:1,class:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},Ys={key:2,class:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},Zs={class:"flex-1"},eo={class:"font-medium text-sm text-gray-900"},to={class:"text-xs text-gray-500 mt-1"},so={class:"flex-shrink-0 ml-2"},oo={key:0,class:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},no={key:0,class:"mt-2"},lo={class:"mb-6"},ao={class:"space-y-2"},ro={class:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50"},io=["disabled"],uo={key:0,class:"text-sm text-red-600 ml-6"},co={key:1,class:"mb-6"},vo={key:0,class:"mt-2 p-2 bg-green-50 rounded text-sm"},po={class:"text-green-800"},mo={key:1,class:"mt-2 p-2 bg-red-50 rounded text-sm"},fo={key:2,class:"mb-6"},go={key:0,class:"mt-2 max-h-40 overflow-y-auto border rounded-lg"},xo=["onClick"],bo={class:"font-medium"},ho={class:"text-sm text-gray-500"},yo={class:"text-sm text-gray-500"},_o={key:1,class:"mt-2 p-3 bg-blue-50 rounded-lg"},wo={class:"font-medium"},ko={class:"text-sm text-gray-600"},Co={key:0,class:"text-sm text-red-600 mt-1"},jo={class:"flex space-x-3"},To=["disabled"],Mo={__name:"POS",setup($o){const g=c(""),_=c(""),N=c(!1),B=c(!1),L=c(!1),F=c(!1),Q=c(""),w=c([]),I=c([]),v=c([]),D=c([]),y=c(null),k=c(0);c(!1);const f=c("cash"),T=c(0),V=c(""),q=c([]),S=c(""),$=c([]),m=c(null),x=c(!0),le=P(()=>{let o=w.value;return g.value&&(o=o.filter(t=>t.name.toLowerCase().includes(g.value.toLowerCase())||t.sku.toLowerCase().includes(g.value.toLowerCase()))),_.value&&(o=o.filter(t=>t.category_id==_.value)),o}),ae=P(()=>{const o=[{id:"",label:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",count:w.value.length,active:_.value===""}];return I.value.forEach(t=>{const r=w.value.filter(d=>d.category_id===t.id).length;o.push({id:t.id,label:t.name,count:r,active:_.value==t.id})}),o}),E=P(()=>v.value.reduce((o,t)=>o+t.price*t.quantity,0)),R=P(()=>x.value?E.value*.07:0),b=P(()=>{const o=E.value-k.value;return o+(x.value?o*.07:0)}),re=P(()=>v.value.length===0?!1:f.value==="cash"?T.value>=b.value:f.value==="customer_account"?m.value&&m.value.available_credit>=b.value:!0),u=o=>new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),Y=o=>o<=0?"bg-red-100 text-red-800":o<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",z=async()=>{var o;if(g.value.length<2&&!_.value){await O();return}F.value=!0;try{const t=await fetch(`/pos/search-products?query=${encodeURIComponent(g.value)}&category=${_.value}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();w.value=r.products||[]}catch(t){console.error("Error searching products:",t),w.value=[]}finally{F.value=!1}},ie=async()=>{var o;if(V.value.length<2){q.value=[];return}try{const t=await fetch(`/pos/search-customers?query=${encodeURIComponent(V.value)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();q.value=r.customers||[]}catch(t){console.error("Error searching customers:",t),q.value=[]}},de=async()=>{var o;if(S.value.length<2){$.value=[];return}try{const t=await fetch(`/pos/search-customers?query=${encodeURIComponent(S.value)}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();$.value=r.customers||[]}catch(t){console.error("Error searching main customers:",t),$.value=[]}},ue=o=>{m.value=o,S.value=o.name||o.company_name,$.value=[]},ce=()=>{m.value=null,S.value="",$.value=[]},O=async()=>{var o;F.value=!0;try{const t=await fetch("/pos/search-products",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();w.value=r||[]}catch(t){console.error("Error loading products:",t),w.value=[]}finally{F.value=!1}},ve=async()=>{try{const o=await fetch("/api/categories",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const t=await o.json();I.value=t.data||[]}catch(o){console.error("Error loading categories:",o)}},Z=o=>{if(o.current_stock<=0)return;const t=v.value.find(r=>r.product_id===o.id);t?t.quantity<o.current_stock&&t.quantity++:v.value.push({id:Date.now()+Math.random(),product_id:o.id,product_name:o.name,price:o.selling_price,quantity:1,max_stock:o.current_stock})},X=({id:o,change:t})=>{const r=v.value.find(s=>s.id===o);if(!r)return;const d=r.quantity+t;d<=0?U(o):d<=r.max_stock&&(r.quantity=d)},U=o=>{const t=v.value.findIndex(r=>r.id===o);t>-1&&v.value.splice(t,1)},K=()=>{v.value=[],y.value=null,k.value=0},pe=o=>{_.value=o.id,z()},G=()=>{L.value=!1,f.value="cash",T.value=0,V.value="",q.value=[]},me=async()=>{var o,t;try{const r={items:v.value.map(i=>({product_id:i.product_id,quantity:i.quantity,unit_price:i.price})),payment_method:f.value,total_amount:b.value,tax_amount:R.value,customer_id:((o=m.value)==null?void 0:o.id)||null,received_amount:f.value==="cash"?T.value:b.value,promotion_id:((t=y.value)==null?void 0:t.id)||null,discount_amount:k.value},s=await(await fetch("/pos/process-sale",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(r)})).json();s.success?(K(),G(),confirm(`‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à: ${s.sale_number}

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏∏‡∏≠‡πÑ‡∏°‡πà?`)&&fe(s.sale),await Promise.all([O(),W()])):alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: "+(s.message||"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ"))}catch(r){console.error("Error processing payment:",r),alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")}},fe=o=>{var d,s;const t=window.open("","_blank","width=300,height=600"),r=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à - ${o.sale_number}</title>
      <style>
        body {
          font-family: 'Courier New', monospace;
          font-size: 12px;
          margin: 10px;
          line-height: 1.4;
        }
        .header {
          text-align: center;
          border-bottom: 1px dashed #000;
          padding-bottom: 10px;
          margin-bottom: 10px;
        }
        .shop-name {
          font-size: 16px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        .receipt-info {
          margin-bottom: 10px;
          border-bottom: 1px dashed #000;
          padding-bottom: 10px;
        }
        .items {
          margin-bottom: 10px;
        }
        .item {
          display: flex;
          justify-content: space-between;
          margin-bottom: 3px;
        }
        .item-name {
          flex: 1;
          margin-right: 10px;
        }
        .item-qty-price {
          text-align: right;
          min-width: 80px;
        }
        .totals {
          border-top: 1px dashed #000;
          padding-top: 10px;
          margin-top: 10px;
        }
        .total-line {
          display: flex;
          justify-content: space-between;
          margin-bottom: 3px;
        }
        .grand-total {
          font-weight: bold;
          font-size: 14px;
          border-top: 1px solid #000;
          padding-top: 5px;
          margin-top: 5px;
        }
        .footer {
          text-align: center;
          margin-top: 20px;
          border-top: 1px dashed #000;
          padding-top: 10px;
          font-size: 10px;
        }
        @media print {
          body { margin: 0; }
          .no-print { display: none; }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <div class="shop-name">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ POS System</div>
        <div>‡πÇ‡∏ó‡∏£: 02-xxx-xxxx</div>
        <div>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà: 123 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø</div>
      </div>

      <div class="receipt-info">
        <div><strong>‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</strong> ${o.sale_number}</div>
        <div><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> ${new Date(o.created_at||Date.now()).toLocaleString("th-TH")}</div>
        <div><strong>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢:</strong> ${((d=o.cashier)==null?void 0:d.username)||"N/A"}</div>
        ${o.customer?`<div><strong>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> ${o.customer.name}</div>`:""}
      </div>

      <div class="items">
        ${((s=o.sale_items)==null?void 0:s.map(i=>{var A;return`
          <div class="item">
            <div class="item-name">${((A=i.product)==null?void 0:A.name)||"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}</div>
            <div class="item-qty-price">${i.quantity} x ${parseFloat(i.unit_price).toFixed(2)}</div>
          </div>
          <div class="item">
            <div class="item-name"></div>
            <div class="item-qty-price">${parseFloat(i.total_price||i.quantity*i.unit_price).toFixed(2)}</div>
          </div>
        `}).join(""))||""}
      </div>

      <div class="totals">
        <div class="total-line">
          <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
          <span>‡∏ø${parseFloat(o.subtotal||0).toFixed(2)}</span>
        </div>
        ${o.discount_amount>0?`
          <div class="total-line">
            <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:</span>
            <span>-‡∏ø${parseFloat(o.discount_amount).toFixed(2)}</span>
          </div>
        `:""}
        ${o.tax_amount>0?`
          <div class="total-line">
            <span>‡∏†‡∏≤‡∏©‡∏µ (7%):</span>
            <span>‡∏ø${parseFloat(o.tax_amount).toFixed(2)}</span>
          </div>
        `:""}
        <div class="total-line grand-total">
          <span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:</span>
          <span>‡∏ø${parseFloat(o.total_amount).toFixed(2)}</span>
        </div>
        <div class="total-line">
          <span>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô:</span>
          <span>‡∏ø${parseFloat(o.received_amount||o.total_amount).toFixed(2)}</span>
        </div>
        ${o.change_amount>0?`
          <div class="total-line">
            <span>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô:</span>
            <span>‡∏ø${parseFloat(o.change_amount).toFixed(2)}</span>
          </div>
        `:""}
      </div>

      <div class="footer">
        <div>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>
        <div>‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</div>
        <div class="no-print" style="margin-top: 20px;">
          <button onclick="window.print()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>
          <button onclick="window.close()">‡∏õ‡∏¥‡∏î</button>
        </div>
      </div>
    </body>
    </html>
  `;t.document.write(r),t.document.close(),setTimeout(()=>{t.print()},500)},ee=()=>{const o=new Date;Q.value=o.toLocaleString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},W=async()=>{var o;try{const t=v.value.map(d=>d.product_id),r=await fetch("/pos/promotions/active",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({product_ids:t})});if(r.ok){const d=await r.json();D.value=d}else console.error("Failed to load promotions:",r.status)}catch(t){console.error("Error loading promotions:",t)}},ge=o=>{switch(o.type){case"percentage":return`‡∏•‡∏î ${o.value}%`;case"fixed_amount":return`‡∏•‡∏î ‡∏ø${u(o.value)}`;case"buy_x_get_y":return`‡∏ã‡∏∑‡πâ‡∏≠ ${o.min_quantity} ‡πÅ‡∏ñ‡∏° ${o.free_quantity}`;default:return"‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©"}},xe=o=>{switch(o){case"percentage":return"text-blue-600";case"fixed_amount":return"text-green-600";case"buy_x_get_y":return"text-purple-600";default:return"text-orange-600"}},be=async o=>{var t;try{const r=await fetch("/pos/promotions/apply",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({promotion_id:o.id,cart_items:v.value.map(d=>({product_id:d.product_id,quantity:d.quantity,price:d.price}))})});if(r.ok){const d=await r.json();y.value=o,k.value=d.discount}else{const d=await r.json();alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ: "+(d.error||"‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏≥‡∏´‡∏ô‡∏î"))}}catch(r){console.error("Error applying promotion:",r),alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô")}},he=()=>{y.value=null,k.value=0};return se(g,()=>{g.value.length===0&&O()}),se(v,()=>{W()},{deep:!0}),ye(async()=>{ee(),setInterval(ee,1e3),await Promise.all([O(),ve(),W()])}),(o,t)=>(n(),_e(ke,{title:"‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô (POS)"},{header:oe(()=>[e("div",je,[t[16]||(t[16]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô (POS) ",-1)),e("div",Te,[e("span",Me,"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: "+l(o.$page.props.auth.user.name),1),e("span",$e,l(Q.value),1)])])]),default:oe(()=>{var r,d;return[e("div",qe,[e("div",Se,[e("div",Ae,[e("div",Pe,[e("div",Fe,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold"},"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)),e("button",{onClick:t[0]||(t[0]=s=>N.value=!N.value),class:"btn btn-primary btn-sm"},[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])])]),N.value?(n(),a("div",Ve,[h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onInput:z,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."},null,544),[[H,g.value]])])):p("",!0),e("div",Ee,[(n(!0),a(j,null,C(ae.value,s=>(n(),a("button",{key:s.id,onClick:i=>pe(s),class:M(["px-3 py-1 rounded-full text-sm font-medium transition-colors",s.active?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},l(s.label)+" ("+l(s.count)+") ",11,He))),128))])]),e("div",Be,[(n(!0),a(j,null,C(le.value,s=>(n(),a("div",{key:s.id,class:"bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:i=>Z(s)},[e("div",Re,[e("div",ze,[s.image?(n(),a("img",{key:0,src:s.image,alt:s.name,class:"w-full h-full object-cover rounded-lg"},null,8,Oe)):(n(),a("svg",Xe,[...t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)])]))]),e("div",Ne,[e("h4",Ie,l(s.name),1),e("p",De,l(s.category),1),e("div",Ue,[e("span",Ke,"‡∏ø"+l(u(s.selling_price)),1),e("span",{class:M([Y(s.current_stock),"px-2 py-1 rounded-full text-xs font-medium"])}," ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ "+l(s.current_stock),3)])])])],8,Le))),128))]),e("div",Ge,[e("div",We,[e("span",Je,l(v.value.length)+" ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",1),e("span",Qe,"‡∏ø"+l(u(b.value)),1)]),e("button",{onClick:t[2]||(t[2]=s=>B.value=!0),disabled:v.value.length===0,class:"w-full btn btn-primary"}," ‡∏î‡∏π‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ",8,Ye)]),B.value?(n(),a("div",Ze,[e("div",et,[e("div",tt,[e("div",st,[t[21]||(t[21]=e("h3",{class:"text-lg font-semibold"},"‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)),e("button",{onClick:t[3]||(t[3]=s=>B.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[20]||(t[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",ot,[v.value.length===0?(n(),a("div",nt," ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ")):(n(),a("div",lt,[(n(!0),a(j,null,C(v.value,s=>(n(),a("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",at,[e("h4",rt,l(s.product_name),1),e("p",it,"‡∏ø"+l(u(s.price))+" x "+l(s.quantity),1)]),e("div",dt,[e("button",{onClick:i=>X({id:s.id,change:-1}),class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,ut),e("span",ct,l(s.quantity),1),e("button",{onClick:i=>X({id:s.id,change:1}),class:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center"},[...t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])],8,vt),e("button",{onClick:i=>U(s.id),class:"w-8 h-8 rounded-full bg-red-100 text-red-600 flex items-center justify-center"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,pt)])]))),128))]))]),e("div",mt,[e("div",ft,[e("div",gt,[t[26]||(t[26]=e("div",null,[e("h4",{class:"font-medium text-sm text-blue-800"},"‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT)"),e("p",{class:"text-xs text-blue-600"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏∏‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ VAT 7%")],-1)),e("label",xt,[h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>x.value=s),type:"checkbox",class:"sr-only peer","aria-label":"‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î VAT"},null,512),[[J,x.value]]),t[25]||(t[25]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),e("div",bt,[e("div",ht,[t[27]||(t[27]=e("span",null,"‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:",-1)),e("span",null,"‡∏ø"+l(u(E.value)),1)]),x.value?(n(),a("div",yt,[t[28]||(t[28]=e("span",null,"‡∏†‡∏≤‡∏©‡∏µ (7%):",-1)),e("span",null,"‡∏ø"+l(u(R.value)),1)])):p("",!0),e("div",_t,[t[29]||(t[29]=e("span",null,"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:",-1)),e("span",wt,"‡∏ø"+l(u(b.value)),1)])]),e("div",kt,[e("button",{onClick:K,class:"flex-1 btn btn-outline"},"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤"),e("button",{onClick:t[5]||(t[5]=s=>{L.value=!0,B.value=!1}),class:"flex-1 btn btn-primary"},"‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô")])])])])):p("",!0)]),e("div",Ct,[e("div",jt,[e("div",Tt,[t[34]||(t[34]=e("h3",{class:"text-lg font-semibold mb-4"},"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",-1)),e("div",Mt,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",-1)),e("div",$t,[h(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>S.value=s),onInput:de,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‡∏´‡∏£‡∏∑‡∏∏‡∏≠ Line ID..."},null,544),[[H,S.value]]),$.value.length>0?(n(),a("div",qt,[(n(!0),a(j,null,C($.value,s=>(n(),a("div",{key:s.id,onClick:i=>ue(s),class:"p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0"},[e("div",At,l(s.name||s.company_name),1),e("div",Pt,l(s.phone),1),e("div",Ft,"‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô: ‡∏ø"+l(u(s.credit_limit)),1)],8,St))),128))])):p("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",-1)),m.value?(n(),a("div",Vt,[e("div",Et,[e("div",Ht,[e("div",Bt,l(m.value.name||m.value.company_name),1),e("div",Lt,l(m.value.phone),1),e("div",Rt," ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡∏ø"+l(u(m.value.available_credit)),1),e("div",zt," ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: "+l(m.value.customer_type==="individual"?"‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏î‡∏≤":"‡∏ô‡∏¥‡∏ï‡∏¥‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•"),1)]),e("button",{onClick:ce,class:"ml-2 text-blue-400 hover:text-blue-600"},[...t[30]||(t[30]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):(n(),a("div",Ot,[...t[31]||(t[31]=[e("div",{class:"text-gray-500 text-center"},[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),e("span",{class:"text-sm"},"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"),e("div",{class:"text-xs text-gray-400 mt-1"},"‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î")],-1)])]))])])])]),e("div",Xt,[e("div",Nt,[e("div",It,[e("div",Dt,[t[35]||(t[35]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),h(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>g.value=s),onInput:z,type:"text",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."},null,544),[[H,g.value]])])]),e("div",Ut,[h(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>_.value=s),onChange:z,class:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-1 focus:ring-primary-500"},[t[36]||(t[36]=e("option",{value:""},"‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",-1)),(n(!0),a(j,null,C(I.value,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name),9,Kt))),128))],544),[[we,_.value]])])])]),e("div",Gt,[e("div",Wt,[(n(!0),a(j,null,C(w.value,s=>(n(),a("div",{key:s.id,class:M(["product-card bg-gray-50 rounded-lg p-4 cursor-pointer hover:shadow-md transition-all duration-200 card-hover",{"opacity-50 cursor-not-allowed":s.current_stock<=0}]),onClick:i=>Z(s)},[e("div",Qt,[s.image?(n(),a("img",{key:0,src:s.image,alt:s.name,class:"w-full h-full object-cover"},null,8,Yt)):(n(),a("svg",Zt,[...t[37]||(t[37]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)])]))]),e("h3",es,l(s.name),1),e("p",ts,l(s.category),1),e("div",ss,[e("span",os,"‡∏ø"+l(u(s.selling_price)),1),e("span",{class:M([Y(s.current_stock),"px-2 py-1 rounded-full text-xs font-medium"])},l(s.current_stock),3)])],10,Jt))),128))]),F.value?(n(),a("div",ns,[...t[38]||(t[38]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1),e("p",{class:"mt-2 text-gray-500"},"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",-1)])])):w.value.length===0?(n(),a("div",ls,[...t[39]||(t[39]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("p",{class:"mt-2"},"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)])])):p("",!0)])]),e("div",as,[e("div",rs,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4"},"‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)),e("div",is,[v.value.length===0?(n(),a("div",ds,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v5a2 2 0 01-2 2H9a2 2 0 01-2-2v-5m6-5V6a2 2 0 00-2-2H9a2 2 0 00-2 2v2"})],-1),e("p",{class:"mt-2"},"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤",-1)])])):p("",!0),(n(!0),a(j,null,C(v.value,s=>(n(),a("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",us,[e("h4",cs,l(s.product_name),1),e("p",vs,"‡∏ø"+l(u(s.price)),1)]),e("div",ps,[e("button",{onClick:i=>X({id:s.id,change:-1}),class:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs"},[...t[41]||(t[41]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])],8,ms),e("span",fs,l(s.quantity),1),e("button",{onClick:i=>X({id:s.id,change:1}),class:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs"},[...t[42]||(t[42]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])],8,gs),e("button",{onClick:i=>U(s.id),class:"w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs"},[...t[43]||(t[43]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,xs)])]))),128))]),e("div",bs,[e("div",hs,[e("div",ys,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-sm text-blue-800"},"‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT)"),e("p",{class:"text-xs text-blue-600"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏∏‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ VAT 7%")],-1)),e("label",_s,[h(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>x.value=s),type:"checkbox",class:"sr-only peer","aria-label":"‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î VAT"},null,512),[[J,x.value]]),t[44]||(t[44]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),e("div",ws,[e("div",ks,[t[46]||(t[46]=e("span",null,"‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:",-1)),e("span",null,"‡∏ø"+l(u(E.value)),1)]),k.value>0?(n(),a("div",Cs,[e("span",null,"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ("+l((r=y.value)==null?void 0:r.name)+"):",1),e("span",null,"-‡∏ø"+l(u(k.value)),1)])):p("",!0),x.value?(n(),a("div",js,[t[47]||(t[47]=e("span",null,"‡∏†‡∏≤‡∏©‡∏µ (7%):",-1)),e("span",null,"‡∏ø"+l(u(R.value)),1)])):p("",!0),e("div",Ts,[t[48]||(t[48]=e("span",null,"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:",-1)),e("span",Ms,"‡∏ø"+l(u(b.value)),1)])]),e("div",$s,[e("button",{onClick:K,disabled:v.value.length===0,class:"w-full btn btn-outline"}," ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ",8,qs),e("button",{onClick:t[10]||(t[10]=s=>L.value=!0),disabled:v.value.length===0,class:"w-full btn btn-primary"}," ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ",8,Ss)])])])])]),L.value?(n(),a("div",As,[e("div",Ps,[e("div",Fs,[e("div",{class:"flex items-center justify-between mb-6"},[t[51]||(t[51]=e("h3",{class:"text-lg font-semibold"},"‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô",-1)),e("button",{onClick:G,class:"text-gray-400 hover:text-gray-600"},[...t[50]||(t[50]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Vs,[t[58]||(t[58]=e("h4",{class:"font-medium mb-2"},"‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",-1)),e("div",Es,[e("div",Hs,[t[53]||(t[53]=e("div",null,[e("h5",{class:"font-medium text-sm text-blue-800"},"‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT)"),e("p",{class:"text-xs text-blue-600"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏∏‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ VAT 7%")],-1)),e("label",Bs,[h(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>x.value=s),type:"checkbox",class:"sr-only peer","aria-label":"‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î VAT"},null,512),[[J,x.value]]),t[52]||(t[52]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),e("div",Ls,[e("div",Rs,[t[54]||(t[54]=e("span",null,"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:",-1)),e("span",null,l(v.value.length)+" ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",1)]),e("div",zs,[t[55]||(t[55]=e("span",null,"‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:",-1)),e("span",null,"‡∏ø"+l(u(E.value)),1)]),k.value>0?(n(),a("div",Os,[e("span",null,"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ("+l((d=y.value)==null?void 0:d.name)+"):",1),e("span",null,"-‡∏ø"+l(u(k.value)),1)])):p("",!0),x.value?(n(),a("div",Xs,[t[56]||(t[56]=e("span",null,"‡∏†‡∏≤‡∏©‡∏µ (7%):",-1)),e("span",null,"‡∏ø"+l(u(R.value)),1)])):p("",!0),e("div",Ns,[t[57]||(t[57]=e("span",null,"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:",-1)),e("span",Is,"‡∏ø"+l(u(b.value)),1)])])]),D.value.length>0?(n(),a("div",Ds,[t[63]||(t[63]=e("h4",{class:"font-medium mb-3"},"‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ",-1)),e("div",Us,[(n(!0),a(j,null,C(D.value,s=>{var i,A,te;return n(),a("div",{key:s.id,onClick:qo=>be(s),class:M(["p-3 border rounded-lg cursor-pointer transition-colors",{"border-green-500 bg-green-50":((i=y.value)==null?void 0:i.id)===s.id,"border-gray-200 hover:border-primary-300 hover:bg-primary-50":((A=y.value)==null?void 0:A.id)!==s.id}])},[e("div",Gs,[e("div",Ws,[s.type==="percentage"?(n(),a("div",Js,[...t[59]||(t[59]=[e("svg",{class:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])])):s.type==="fixed_amount"?(n(),a("div",Qs,[...t[60]||(t[60]=[e("svg",{class:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z","clip-rule":"evenodd"})],-1)])])):(n(),a("div",Ys,[...t[61]||(t[61]=[e("svg",{class:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})],-1)])]))]),e("div",Zs,[e("div",eo,l(s.name),1),e("div",to,l(s.description),1),e("div",{class:M(["text-xs font-medium mt-1",xe(s.type)])},l(ge(s)),3)]),e("div",so,[((te=y.value)==null?void 0:te.id)===s.id?(n(),a("svg",oo,[...t[62]||(t[62]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):p("",!0)])])],10,Ks)}),128)),y.value?(n(),a("div",no,[e("button",{onClick:he,class:"text-sm text-red-600 hover:text-red-800 underline"}," ‡∏•‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ")])):p("",!0)])])):p("",!0),e("div",lo,[t[66]||(t[66]=e("h4",{class:"font-medium mb-3"},"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô",-1)),e("div",ao,[e("label",ro,[h(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>f.value=s),type:"radio",value:"cash",class:"mr-3"},null,512),[[ne,f.value]]),t[64]||(t[64]=e("div",{class:"flex items-center"},[e("span",{class:"text-2xl mr-2"},"üí∞"),e("span",null,"‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î")],-1))]),e("label",{class:M(["flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",{"opacity-50 cursor-not-allowed":!m.value}])},[h(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>f.value=s),type:"radio",value:"customer_account",class:"mr-3",disabled:!m.value},null,8,io),[[ne,f.value]]),t[65]||(t[65]=e("div",{class:"flex items-center"},[e("span",{class:"text-2xl mr-2"},"üè¢"),e("span",null,"‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï (‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)")],-1))],2),!m.value&&f.value==="customer_account"?(n(),a("div",uo," ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï ")):p("",!0)])]),f.value==="cash"?(n(),a("div",co,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö",-1)),h(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>T.value=s),type:"number",step:"0.01",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"0.00"},null,512),[[H,T.value,void 0,{number:!0}]]),T.value>=b.value?(n(),a("div",vo,[e("span",po,"‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô: ‡∏ø"+l(u(T.value-b.value)),1)])):T.value>0?(n(),a("div",mo,[...t[67]||(t[67]=[e("span",{class:"text-red-800"},"‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠",-1)])])):p("",!0)])):p("",!0),f.value==="customer_account"?(n(),a("div",fo,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",-1)),h(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>V.value=s),onInput:ie,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..."},null,544),[[H,V.value]]),q.value.length>0?(n(),a("div",go,[(n(!0),a(j,null,C(q.value,s=>{var i;return n(),a("div",{key:s.id,onClick:A=>m.value=s,class:M(["p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",{"bg-primary-50":((i=m.value)==null?void 0:i.id)===s.id}])},[e("div",bo,l(s.name),1),e("div",ho,l(s.company_name),1),e("div",yo,"‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡∏ø"+l(u(s.available_credit)),1)],10,xo)}),128))])):p("",!0),m.value?(n(),a("div",_o,[e("div",wo,l(m.value.name),1),e("div",ko,"‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ‡∏ø"+l(u(m.value.available_credit)),1),m.value.available_credit<b.value?(n(),a("div",Co," ‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ")):p("",!0)])):p("",!0)])):p("",!0),e("div",jo,[e("button",{onClick:G,class:"flex-1 btn btn-outline"},"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"),e("button",{onClick:me,disabled:!re.value,class:"flex-1 btn btn-primary"}," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ",8,To)])])])])):p("",!0)])])]}),_:1}))}},Ho=Ce(Mo,[["__scopeId","data-v-d0b7ea20"]]);export{Ho as default};

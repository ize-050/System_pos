import{u as B,r as h,z as A,a as u,c as D,w as y,d as t,t as n,j as w,m as q,k as i,x as k,p as S,e as d,v as a,g as c,F as V,h as C,i as $,G as z}from"./app-6a986ce6.js";import{A as E}from"./AppLayout-c0397362.js";/* empty css            */import"./ApplicationLogo-88d45659.js";import"./_plugin-vue_export-helper-c27b6911.js";const M={class:"py-12"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white rounded-lg shadow-sm p-6"},G={class:"flex justify-between items-center mb-6"},H={class:"text-2xl font-bold text-gray-900"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},J={class:"md:col-span-2"},K={class:"mb-8"},Q={class:"mb-4"},W={class:"relative"},X={key:0,class:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto"},Y=["onClick"],Z={class:"flex justify-between"},tt={class:"font-medium"},et={class:"text-sm text-gray-600"},st={class:"border rounded-lg overflow-hidden"},ot={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-white divide-y divide-gray-200"},it={class:"px-4 py-3"},lt={class:"font-medium"},nt={class:"text-sm text-gray-500"},dt={class:"px-4 py-3"},at=["onUpdate:modelValue","onInput"],ut={class:"px-4 py-3 text-right"},pt={class:"px-4 py-3 text-right font-medium"},mt={class:"px-4 py-3 text-center"},ct=["onClick"],xt={class:"bg-gray-50"},gt={class:"px-4 py-3 text-right font-bold text-lg text-indigo-600"},bt={class:"mb-8"},yt={class:"flex justify-between pt-6 border-t"},ft={class:"flex gap-4"},_t=["disabled"],Vt={__name:"Edit",props:{requisition:Object,products:Array},setup(x){var _,v;const l=x,r=B({requisition_date:((_=l.requisition.requisition_date)==null?void 0:_.split("T")[0])||"",requester_name:l.requisition.requester_name||"",department:l.requisition.department||"",project_name:l.requisition.project_name||"",reason:l.requisition.reason||"",notes:l.requisition.notes||"",items:((v=l.requisition.items)==null?void 0:v.map(o=>{var e,s;return{product_id:o.product_id,product_name:((e=o.product)==null?void 0:e.name)||"",product_sku:((s=o.product)==null?void 0:s.sku)||"",quantity:o.quantity,cost_price:parseFloat(o.cost_price),total_cost:parseFloat(o.total_cost)}}))||[]}),p=h(""),m=h([]),j=()=>{if(p.value.length<1){m.value=[];return}const o=p.value.toLowerCase();m.value=l.products.filter(e=>(e.name.toLowerCase().includes(o)||e.sku.toLowerCase().includes(o))&&!r.items.some(s=>s.product_id===e.id)).slice(0,10)},F=o=>{r.items.push({product_id:o.id,product_name:o.name,product_sku:o.sku,quantity:1,cost_price:parseFloat(o.cost_price),total_cost:parseFloat(o.cost_price)}),p.value="",m.value=[]},U=o=>{r.items.splice(o,1)},I=o=>{const e=r.items[o];e.quantity<1&&(e.quantity=1),e.total_cost=e.quantity*e.cost_price},N=A(()=>r.items.reduce((o,e)=>o+e.total_cost,0)),g=o=>o?new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(o):"0.00",L=()=>{r.put(route("stock-requisitions.update",l.requisition.id))},T=()=>{confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏ô‡∏µ‡πâ?")&&z.delete(route("stock-requisitions.destroy",l.requisition.id))};return(o,e)=>(u(),D(E,{title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{header:y(()=>[...e[7]||(e[7]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)])]),default:y(()=>[t("div",M,[t("div",P,[t("div",R,[t("div",G,[t("div",null,[t("h1",H,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å: "+n(x.requisition.requisition_number),1),e[8]||(e[8]=t("span",{class:"text-sm text-gray-500"},"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡πà‡∏≤‡∏á",-1))]),w(i(k),{href:o.route("stock-requisitions.show",x.requisition.id),class:"text-gray-600 hover:text-gray-900"},{default:y(()=>[...e[9]||(e[9]=[q(" ‚Üê ‡∏Å‡∏•‡∏±‡∏ö ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:S(L,["prevent"])},[t("div",O,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å *",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i(r).requisition_date=s),type:"date",required:"",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).requisition_date]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å *",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i(r).requester_name=s),type:"text",required:"",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).requester_name]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÅ‡∏ú‡∏ô‡∏Å",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>i(r).department=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).department]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£/‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>i(r).project_name=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).project_name]])]),t("div",J,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å",-1)),d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>i(r).reason=s),rows:"2",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).reason]])])]),t("div",K,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold mb-4"},"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)),t("div",Q,[t("div",W,[d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...",class:"w-full rounded-lg border-gray-300",onInput:j},null,544),[[a,p.value]]),m.value.length>0?(u(),c("div",X,[(u(!0),c(V,null,C(m.value,s=>(u(),c("div",{key:s.id,onClick:b=>F(s),class:"p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0"},[t("div",Z,[t("span",tt,n(s.name),1),t("span",et,"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô: ‡∏ø"+n(g(s.cost_price)),1)])],8,Y))),128))])):$("",!0)])]),t("div",st,[t("table",ot,[e[17]||(e[17]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase w-32"},"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase w-32"},"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase w-32"},"‡∏£‡∏ß‡∏°"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20"},"‡∏•‡∏ö")])],-1)),t("tbody",rt,[(u(!0),c(V,null,C(i(r).items,(s,b)=>(u(),c("tr",{key:b},[t("td",it,[t("div",lt,n(s.product_name),1),t("div",nt,n(s.product_sku),1)]),t("td",dt,[d(t("input",{"onUpdate:modelValue":f=>s.quantity=f,type:"number",min:"1",class:"w-full text-center rounded border-gray-300",onInput:f=>I(b)},null,40,at),[[a,s.quantity,void 0,{number:!0}]])]),t("td",ut," ‡∏ø"+n(g(s.cost_price)),1),t("td",pt," ‡∏ø"+n(g(s.total_cost)),1),t("td",mt,[t("button",{type:"button",onClick:f=>U(b),class:"text-red-600 hover:text-red-900"}," üóëÔ∏è ",8,ct)])]))),128))]),t("tfoot",xt,[t("tr",null,[e[15]||(e[15]=t("td",{colspan:"3",class:"px-4 py-3 text-right font-semibold"},"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:",-1)),t("td",gt," ‡∏ø"+n(g(N.value)),1),e[16]||(e[16]=t("td",null,null,-1))])])])])]),t("div",bt,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",-1)),d(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>i(r).notes=s),rows:"2",class:"w-full rounded-lg border-gray-300"},null,512),[[a,i(r).notes]])]),t("div",yt,[t("button",{type:"button",onClick:T,class:"px-6 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50"}," ‡∏•‡∏ö‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å "),t("div",ft,[w(i(k),{href:o.route("stock-requisitions.show",x.requisition.id),class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"},{default:y(()=>[...e[20]||(e[20]=[q(" ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:i(r).processing,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},n(i(r).processing?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"),9,_t)])])],32)])])])]),_:1}))}};export{Vt as default};

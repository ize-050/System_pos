import{a as i,g as n,d as t,z as x,c as N,w as f,t as s,j as a,k as m,m as u,x as v,n as h,i as l,F as k,h as _,P as S,u as F,G as T}from"./app-6a986ce6.js";import{A}from"./AppLayout-c0397362.js";import{r as V}from"./ArrowLeftIcon-223f0949.js";/* empty css            */import"./ApplicationLogo-88d45659.js";import"./_plugin-vue_export-helper-c27b6911.js";function C(o,r){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function D(o,r){return i(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const z={class:"py-12"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},q={class:"p-6 lg:p-8"},E={class:"flex items-center justify-between mb-6"},I={class:"text-2xl font-bold text-gray-900"},M={class:"flex space-x-2"},P={class:"mb-6"},G={key:0,class:"ml-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800"},O={key:1,class:"ml-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"},U={key:2,class:"ml-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},J={class:"lg:col-span-2 space-y-6"},K={class:"bg-gray-50 p-6 rounded-lg"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={class:"mt-1 text-sm text-gray-900"},W={class:"mt-1 text-sm text-gray-900"},X={key:0,class:"md:col-span-2"},Y={class:"mt-1 text-sm text-gray-900"},tt={class:"bg-gray-50 p-6 rounded-lg"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ot={key:0},st={class:"mt-1 text-lg font-semibold text-green-600"},it={key:1},nt={class:"mt-1 text-lg font-semibold text-green-600"},rt={key:2},dt={class:"mt-1 text-lg font-semibold text-green-600"},lt={key:3},at={class:"mt-1 text-sm text-gray-900"},mt={key:4},ut={class:"mt-1 text-sm text-gray-900"},gt={class:"bg-gray-50 p-6 rounded-lg"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"mt-1 text-sm text-gray-900"},ft={class:"mt-1 text-sm text-gray-900"},pt={class:"bg-gray-50 p-6 rounded-lg"},yt={key:0,class:"mb-4"},bt={class:"flex flex-wrap gap-2"},vt={key:1},ht={class:"flex flex-wrap gap-2"},wt={key:2},kt={class:"space-y-6"},_t={class:"bg-white border border-gray-200 rounded-lg p-6"},Ct={class:"space-y-4"},Dt={class:"mt-1 text-2xl font-semibold text-gray-900"},jt={key:0},Lt={class:"mt-1 text-sm text-gray-900"},Bt={class:"mt-2 w-full bg-gray-200 rounded-full h-2"},Nt={class:"mt-1 text-xs text-gray-500"},St={key:1},Ft={class:"bg-white border border-gray-200 rounded-lg p-6"},Tt={class:"space-y-3"},At={class:"bg-white border border-gray-200 rounded-lg p-6"},Vt={class:"space-y-2"},zt={class:"mt-1 text-sm text-gray-900"},Ht={class:"mt-1 text-sm text-gray-900"},Gt={__name:"Show",props:{promotion:Object,products:Array,categories:Array},setup(o){const r=o,j=x(()=>new Date(r.promotion.end_date)<new Date),L=x(()=>new Date(r.promotion.start_date)>new Date),p=x(()=>!r.promotion.applicable_categories||r.promotion.applicable_categories.length===0?[]:r.categories.filter(d=>r.promotion.applicable_categories.includes(d.id))),y=x(()=>!r.promotion.applicable_products||r.promotion.applicable_products.length===0?[]:r.products.filter(d=>r.promotion.applicable_products.includes(d.id))),b=d=>new Intl.NumberFormat("th-TH").format(d),c=d=>new Intl.DateTimeFormat("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(d)),B=()=>{F({is_active:!r.promotion.is_active}).patch(route("promotions.update",r.promotion.id),{preserveScroll:!0,onSuccess:()=>{}})},w=()=>{confirm("คุณแน่ใจหรือไม่ที่จะลบโปรโมชั่นนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้")&&T.delete(route("promotions.destroy",r.promotion.id))};return(d,e)=>(i(),N(A,{title:"รายละเอียดโปรโมชั่น"},{default:f(()=>[t("div",z,[t("div",H,[t("div",$,[t("div",q,[t("div",E,[t("h1",I,s(o.promotion.name),1),t("div",M,[a(m(v),{href:d.route("promotions.edit",o.promotion.id),class:"inline-flex items-center px-4 py-2 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 focus:bg-yellow-700 active:bg-yellow-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:f(()=>[a(m(C),{class:"w-4 h-4 mr-2"}),e[0]||(e[0]=u(" แก้ไข ",-1))]),_:1},8,["href"]),t("button",{onClick:w,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[a(m(D),{class:"w-4 h-4 mr-2"}),e[1]||(e[1]=u(" ลบ ",-1))]),a(m(v),{href:d.route("promotions.index"),class:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:f(()=>[a(m(V),{class:"w-4 h-4 mr-2"}),e[2]||(e[2]=u(" กลับ ",-1))]),_:1},8,["href"])])]),t("div",P,[t("span",{class:h(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",o.promotion.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[t("span",{class:h(["w-2 h-2 rounded-full mr-2",o.promotion.is_active?"bg-green-400":"bg-red-400"])},null,2),u(" "+s(o.promotion.is_active?"เปิดใช้งาน":"ปิดใช้งาน"),1)],2),j.value?(i(),n("span",G," หมดอายุแล้ว ")):L.value?(i(),n("span",O," ยังไม่เริ่ม ")):(i(),n("span",U," กำลังใช้งาน "))]),t("div",Z,[t("div",J,[t("div",K,[e[6]||(e[6]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลพื้นฐาน",-1)),t("dl",Q,[t("div",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500"},"ชื่อโปรโมชั่น",-1)),t("dd",R,s(o.promotion.name),1)]),t("div",null,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500"},"ประเภท",-1)),t("dd",W,s(o.promotion.type_label),1)]),o.promotion.description?(i(),n("div",X,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500"},"รายละเอียด",-1)),t("dd",Y,s(o.promotion.description),1)])):l("",!0)])]),t("div",tt,[e[12]||(e[12]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ค่าโปรโมชั่น",-1)),t("dl",et,[o.promotion.type==="percentage"?(i(),n("div",ot,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"เปอร์เซ็นต์ส่วนลด",-1)),t("dd",st,s(o.promotion.value)+"%",1)])):l("",!0),o.promotion.type==="fixed_amount"?(i(),n("div",it,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"จำนวนเงินส่วนลด",-1)),t("dd",nt,"฿"+s(b(o.promotion.value)),1)])):l("",!0),o.promotion.type==="buy_x_get_y"?(i(),n("div",rt,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"เงื่อนไข",-1)),t("dd",dt," ซื้อ "+s(o.promotion.minimum_quantity)+" แถม "+s(o.promotion.free_quantity),1)])):l("",!0),o.promotion.minimum_amount?(i(),n("div",lt,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"ยอดขั้นต่ำ",-1)),t("dd",at,"฿"+s(b(o.promotion.minimum_amount)),1)])):l("",!0),o.promotion.maximum_discount?(i(),n("div",mt,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"ส่วนลดสูงสุด",-1)),t("dd",ut,"฿"+s(b(o.promotion.maximum_discount)),1)])):l("",!0)])]),t("div",gt,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ระยะเวลาโปรโมชั่น",-1)),t("dl",ct,[t("div",null,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500"},"วันที่เริ่มต้น",-1)),t("dd",xt,s(c(o.promotion.start_date)),1)]),t("div",null,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500"},"วันที่สิ้นสุด",-1)),t("dd",ft,s(c(o.promotion.end_date)),1)])])]),t("div",pt,[e[19]||(e[19]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"สินค้าที่ใช้โปรโมชั่น",-1)),p.value.length>0?(i(),n("div",yt,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500 mb-2"},"หมวดหมู่สินค้า",-1)),t("div",bt,[(i(!0),n(k,null,_(p.value,g=>(i(),n("span",{key:g.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"},s(g.name),1))),128))])])):l("",!0),y.value.length>0?(i(),n("div",vt,[e[17]||(e[17]=t("dt",{class:"text-sm font-medium text-gray-500 mb-2"},"สินค้า",-1)),t("div",ht,[(i(!0),n(k,null,_(y.value,g=>(i(),n("span",{key:g.id,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"},s(g.name),1))),128))])])):l("",!0),p.value.length===0&&y.value.length===0?(i(),n("div",wt,[...e[18]||(e[18]=[t("p",{class:"text-sm text-gray-500"},"ใช้ได้กับสินค้าทั้งหมด",-1)])])):l("",!0)])]),t("div",kt,[t("div",_t,[e[23]||(e[23]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"สถิติการใช้งาน",-1)),t("dl",Ct,[t("div",null,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500"},"จำนวนครั้งที่ใช้แล้ว",-1)),t("dd",Dt,s(o.promotion.used_count),1)]),o.promotion.usage_limit?(i(),n("div",jt,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-500"},"จำกัดการใช้งาน",-1)),t("dd",Lt,s(o.promotion.usage_limit)+" ครั้ง",1),t("div",Bt,[t("div",{class:"bg-green-600 h-2 rounded-full",style:S({width:`${Math.min(o.promotion.used_count/o.promotion.usage_limit*100,100)}%`})},null,4)]),t("p",Nt," เหลือ "+s(Math.max(o.promotion.usage_limit-o.promotion.used_count,0))+" ครั้ง ",1)])):(i(),n("div",St,[...e[22]||(e[22]=[t("dt",{class:"text-sm font-medium text-gray-500"},"จำกัดการใช้งาน",-1),t("dd",{class:"mt-1 text-sm text-gray-900"},"ไม่จำกัด",-1)])]))])]),t("div",Ft,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"การดำเนินการ",-1)),t("div",Tt,[a(m(v),{href:d.route("promotions.edit",o.promotion.id),class:"w-full inline-flex justify-center items-center px-4 py-2 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 focus:bg-yellow-700 active:bg-yellow-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:f(()=>[a(m(C),{class:"w-4 h-4 mr-2"}),e[24]||(e[24]=u(" แก้ไขโปรโมชั่น ",-1))]),_:1},8,["href"]),t("button",{onClick:B,class:h(["w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",o.promotion.is_active?"bg-red-600 hover:bg-red-700 focus:bg-red-700 active:bg-red-900":"bg-green-600 hover:bg-green-700 focus:bg-green-700 active:bg-green-900"])},s(o.promotion.is_active?"ปิดใช้งาน":"เปิดใช้งาน"),3),t("button",{onClick:w,class:"w-full inline-flex justify-center items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},[a(m(D),{class:"w-4 h-4 mr-2"}),e[25]||(e[25]=u(" ลบโปรโมชั่น ",-1))])])]),t("div",At,[e[29]||(e[29]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลระบบ",-1)),t("dl",Vt,[t("div",null,[e[27]||(e[27]=t("dt",{class:"text-sm font-medium text-gray-500"},"สร้างเมื่อ",-1)),t("dd",zt,s(c(o.promotion.created_at)),1)]),t("div",null,[e[28]||(e[28]=t("dt",{class:"text-sm font-medium text-gray-500"},"อัปเดตล่าสุด",-1)),t("dd",Ht,s(c(o.promotion.updated_at)),1)])])])])])])])])])]),_:1}))}};export{Gt as default};

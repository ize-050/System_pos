import{E as H,a as v,d as M,e as a,b as t,t as o,r as g,u as N,w as A,z as h,i as u,p as c,l as y,g as k,v as I,h as B,c as C,k as O,j as U,q as b,F as P,I as q}from"./app-6ba43703.js";import{A as $}from"./AppLayout-ac0cd7e0.js";import{_ as S}from"./Pagination-1b8d9de0.js";import{_ as G,a as j,b as E}from"./DangerButton-af07e3cf.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./ApplicationLogo-9fe9ca86.js";/* empty css                                                                  */const K={name:"ConfirmationModal",components:{Modal:G},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},cancelText:{type:String,default:""}},emits:["close","confirm"]},Q={class:"p-6"},R={class:"mt-3 text-center sm:mt-5"},W={class:"text-lg leading-6 font-medium text-gray-900"},X={class:"mt-2"},Y={class:"text-sm text-gray-500"},Z={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"};function tt(r,l,i,m,p,x){const d=H("Modal");return v(),M(d,{show:i.show,onClose:l[2]||(l[2]=f=>r.$emit("close")),"max-width":"md"},{default:a(()=>[t("div",Q,[l[3]||(l[3]=t("div",{class:"flex items-center"},[t("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[t("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),t("div",R,[t("h3",W,o(i.title||"ยืนยันการดำเนินการ"),1),t("div",X,[t("p",Y,o(i.message||"คุณแน่ใจหรือไม่ที่จะดำเนินการนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้"),1)])]),t("div",Z,[t("button",{type:"button",onClick:l[0]||(l[0]=f=>r.$emit("confirm")),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm"},o(i.confirmText||"ยืนยัน"),1),t("button",{type:"button",onClick:l[1]||(l[1]=f=>r.$emit("close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm"},o(i.cancelText||"ยกเลิก"),1)])])]),_:1},8,["show"])}const F=J(K,[["render",tt]]),et={class:"py-12"},st={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ot={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},lt={class:"p-6 bg-white border-b border-gray-200"},nt={class:"mb-6 flex justify-between items-center"},rt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},it={class:"bg-blue-50 p-4 rounded-lg"},at={class:"flex items-center"},dt={class:"ml-4"},ut={class:"text-2xl font-bold text-blue-900"},ct={class:"bg-green-50 p-4 rounded-lg"},mt={class:"flex items-center"},pt={class:"ml-4"},xt={class:"text-2xl font-bold text-green-900"},ft={class:"bg-yellow-50 p-4 rounded-lg"},gt={class:"flex items-center"},yt={class:"ml-4"},vt={class:"text-2xl font-bold text-yellow-900"},bt={class:"bg-purple-50 p-4 rounded-lg"},ht={class:"flex items-center"},wt={class:"ml-4"},_t={class:"text-2xl font-bold text-purple-900"},kt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},Ct={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},Bt={class:"min-w-full divide-y divide-gray-200"},Mt={class:"bg-white divide-y divide-gray-200"},$t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap"},jt={class:"text-sm font-medium text-gray-900"},Et={key:0,class:"text-sm text-gray-500"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Lt={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Nt={class:"flex space-x-2"},At=["onClick"],It={class:"mt-6"},Ot={components:{AppLayout:$,Link:h,Pagination:S,ConfirmationModal:F,SecondaryButton:j,DangerButton:E}},Wt=Object.assign(Ot,{__name:"Index",props:{customers:Object,filters:Object,stats:Object},setup(r){const l=r,i=g(l.filters.search||""),m=g(l.filters.customer_type||""),p=g(l.filters.is_active||""),x=g(!1),d=g(null),f=N({});A([i,m,p],()=>{q.get(route("customers.index"),{search:i.value,customer_type:m.value,is_active:p.value},{preserveState:!0,replace:!0})},{debounce:300});const T=()=>{i.value="",m.value="",p.value=""},w=n=>new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0),D=n=>({individual:"บุคคลธรรมดา",company:"บริษัท",contractor:"ผู้รับเหมา"})[n]||n,V=n=>({individual:"bg-blue-100 text-blue-800",company:"bg-green-100 text-green-800",contractor:"bg-purple-100 text-purple-800"})[n]||"bg-gray-100 text-gray-800",z=n=>{d.value=n,x.value=!0},L=()=>{f.delete(route("customers.destroy",d.value.id),{onSuccess:()=>{x.value=!1,d.value=null}})};return(n,e)=>(v(),M($,{title:"จัดการลูกค้า"},{header:a(()=>[...e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," จัดการลูกค้า ",-1)])]),default:a(()=>[t("div",et,[t("div",st,[t("div",ot,[t("div",lt,[t("div",nt,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-900"},"จัดการลูกค้า",-1)),u(y(h),{href:n.route("customers.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest disabled:opacity-25 transition ease-in-out duration-150",style:{"background-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:a(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" เพิ่มลูกค้าใหม่ ",-1)])]),_:1},8,["href"])]),t("div",rt,[t("div",it,[t("div",at,[e[9]||(e[9]=t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",dt,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-blue-600"},"ลูกค้าทั้งหมด",-1)),t("p",ut,o(r.stats.total_customers),1)])])]),t("div",ct,[t("div",mt,[e[11]||(e[11]=t("div",{class:"p-2 bg-green-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",pt,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-green-600"},"ลูกค้าที่ใช้งาน",-1)),t("p",xt,o(r.stats.active_customers),1)])])]),t("div",ft,[t("div",gt,[e[13]||(e[13]=t("div",{class:"p-2 bg-yellow-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),t("div",yt,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-yellow-600"},"ยอดค้างชำระ",-1)),t("p",vt,"฿"+o(w(r.stats.total_balance)),1)])])]),t("div",bt,[t("div",ht,[e[15]||(e[15]=t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1)),t("div",wt,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-purple-600"},"วงเงินเครดิต",-1)),t("p",_t,"฿"+o(w(r.stats.total_credit_limit)),1)])])])]),t("div",kt,[t("div",null,[k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),type:"text",placeholder:"ค้นหาลูกค้า...",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},null,512),[[I,i.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...e[16]||(e[16]=[t("option",{value:""},"ประเภททั้งหมด",-1),t("option",{value:"individual"},"บุคคลธรรมดา",-1),t("option",{value:"company"},"บริษัท",-1),t("option",{value:"contractor"},"ผู้รับเหมา",-1)])],512),[[B,m.value]])]),t("div",null,[k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...e[17]||(e[17]=[t("option",{value:""},"สถานะทั้งหมด",-1),t("option",{value:"1"},"ใช้งาน",-1),t("option",{value:"0"},"ไม่ใช้งาน",-1)])],512),[[B,p.value]])]),t("div",null,[t("button",{onClick:T,class:"w-full px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-150 ease-in-out"}," ล้างตัวกรอง ")])]),t("div",Ct,[t("table",Bt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รหัสลูกค้า "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ชื่อลูกค้า "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," เบอร์โทร "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Line ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ประเภท "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ยอดค้างชำระ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," จำนวนคำสั่งซื้อ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," สถานะ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," การจัดการ ")])],-1)),t("tbody",Mt,[(v(!0),C(P,null,O(r.customers.data,s=>(v(),C("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",$t,o(s.customer_code),1),t("td",St,[t("div",jt,o(s.name||s.company_name),1),s.email?(v(),C("div",Et,o(s.email),1)):U("",!0)]),t("td",Ft,o(s.phone),1),t("td",Tt,o(s.line_id||"-"),1),t("td",Dt,[t("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",V(s.customer_type)])},o(D(s.customer_type)),3)]),t("td",Vt,[t("span",{class:b(s.current_balance>0?"text-red-600 font-semibold":"text-gray-900")}," ฿"+o(w(s.current_balance)),3)]),t("td",zt,o(s.sales_count),1),t("td",Lt,[t("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(s.is_active?"ใช้งาน":"ไม่ใช้งาน"),3)]),t("td",Ht,[t("div",Nt,[u(y(h),{href:n.route("customers.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:a(()=>[...e[18]||(e[18]=[c(" ดู ",-1)])]),_:1},8,["href"]),u(y(h),{href:n.route("customers.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:a(()=>[...e[19]||(e[19]=[c(" แก้ไข ",-1)])]),_:1},8,["href"]),t("button",{onClick:_=>z(s),class:"text-red-600 hover:text-red-900"}," ลบ ",8,At)])])]))),128))])])]),t("div",It,[u(S,{links:r.customers.links},null,8,["links"])])])])])]),u(F,{show:x.value,onClose:e[4]||(e[4]=s=>x.value=!1)},{title:a(()=>[...e[21]||(e[21]=[c(" ยืนยันการลบลูกค้า ",-1)])]),content:a(()=>{var s,_;return[c(' คุณแน่ใจหรือไม่ที่จะลบลูกค้า "'+o(((s=d.value)==null?void 0:s.name)||((_=d.value)==null?void 0:_.company_name))+'"? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ',1)]}),footer:a(()=>[u(j,{onClick:e[3]||(e[3]=s=>x.value=!1)},{default:a(()=>[...e[22]||(e[22]=[c(" ยกเลิก ",-1)])]),_:1}),u(E,{class:b(["ml-3",{"opacity-25":y(f).processing}]),onClick:L,disabled:y(f).processing},{default:a(()=>[...e[23]||(e[23]=[c(" ลบลูกค้า ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}});export{Wt as default};

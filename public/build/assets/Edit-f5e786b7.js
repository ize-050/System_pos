import{u as V,a as i,d as h,e as c,b as t,t as a,i as b,p as x,l as r,z as v,s as U,g as m,v as g,q as u,c as d,j as l,h as S,k,y as _,F as w}from"./app-6ba43703.js";import{A as j}from"./AppLayout-ac0cd7e0.js";import{r as A}from"./ArrowLeftIcon-c324ab1c.js";/* empty css            */import"./ApplicationLogo-9fe9ca86.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                                  */const B={class:"py-12"},C={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},D={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},M={class:"p-6 lg:p-8"},N={class:"flex items-center justify-between mb-6"},F={class:"text-2xl font-bold text-gray-900"},O={class:"flex space-x-2"},z={class:"bg-gray-50 p-6 rounded-lg"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={key:0,class:"mt-2 text-sm text-red-600"},L={key:0,class:"mt-2 text-sm text-red-600"},T={class:"md:col-span-2"},X={key:0,class:"mt-2 text-sm text-red-600"},Y={class:"bg-gray-50 p-6 rounded-lg"},G={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},H={key:0},J={class:"mt-1 relative rounded-md shadow-sm"},K={key:0,class:"mt-2 text-sm text-red-600"},P={key:1},Q={class:"mt-1 relative rounded-md shadow-sm"},R={key:0,class:"mt-2 text-sm text-red-600"},W={key:2,class:"md:col-span-2"},Z={class:"grid grid-cols-2 gap-4"},$={key:0,class:"mt-2 text-sm text-red-600"},ee={key:0,class:"mt-2 text-sm text-red-600"},te={key:3},re={class:"mt-1 relative rounded-md shadow-sm"},se={key:0,class:"mt-2 text-sm text-red-600"},oe={key:4},ie={class:"mt-1 relative rounded-md shadow-sm"},de={key:0,class:"mt-2 text-sm text-red-600"},ne={class:"bg-gray-50 p-6 rounded-lg"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={key:0,class:"mt-2 text-sm text-red-600"},me={key:0,class:"mt-2 text-sm text-red-600"},ue={class:"bg-gray-50 p-6 rounded-lg"},ge={class:"space-y-4"},pe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},ce=["value"],be={class:"text-sm"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-60 overflow-y-auto"},ye=["value"],xe={class:"text-sm"},ve={class:"bg-gray-50 p-6 rounded-lg"},_e={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ke={key:0,class:"mt-2 text-sm text-red-600"},we=["value"],qe={class:"flex items-center"},Ve={class:"flex items-center justify-end space-x-4 pt-6"},he=["disabled"],Ue={key:0},Se={key:1},Fe={__name:"Edit",props:{promotion:Object,products:Array,categories:Array},setup(p){const n=p,s=V({name:n.promotion.name,description:n.promotion.description,type:n.promotion.type,value:n.promotion.value,minimum_quantity:n.promotion.minimum_quantity,free_quantity:n.promotion.free_quantity,minimum_amount:n.promotion.minimum_amount,maximum_discount:n.promotion.maximum_discount,start_date:n.promotion.start_date?new Date(n.promotion.start_date).toISOString().slice(0,16):"",end_date:n.promotion.end_date?new Date(n.promotion.end_date).toISOString().slice(0,16):"",applicable_products:n.promotion.applicable_products||[],applicable_categories:n.promotion.applicable_categories||[],usage_limit:n.promotion.usage_limit,is_active:n.promotion.is_active}),q=()=>{s.put(route("promotions.update",n.promotion.id),{onSuccess:()=>{}})};return(f,e)=>(i(),h(j,{title:"แก้ไขโปรโมชั่น"},{default:c(()=>[t("div",B,[t("div",C,[t("div",D,[t("div",M,[t("div",N,[t("h1",F,"แก้ไขโปรโมชั่น: "+a(p.promotion.name),1),t("div",O,[b(r(v),{href:f.route("promotions.show",p.promotion.id),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:c(()=>[...e[15]||(e[15]=[x(" ดูรายละเอียด ",-1)])]),_:1},8,["href"]),b(r(v),{href:f.route("promotions.index"),class:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:c(()=>[b(r(A),{class:"w-4 h-4 mr-2"}),e[16]||(e[16]=x(" กลับ ",-1))]),_:1},8,["href"])])]),t("form",{onSubmit:U(q,["prevent"]),class:"space-y-6"},[t("div",z,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลพื้นฐาน",-1)),t("div",E,[t("div",null,[e[17]||(e[17]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"ชื่อโปรโมชั่น *",-1)),m(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>r(s).name=o),type:"text",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.name}]),required:""},null,2),[[g,r(s).name]]),r(s).errors.name?(i(),d("div",I,a(r(s).errors.name),1)):l("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{for:"type",class:"block text-sm font-medium text-gray-700"},"ประเภทโปรโมชั่น *",-1)),m(t("select",{id:"type","onUpdate:modelValue":e[1]||(e[1]=o=>r(s).type=o),class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.type}]),required:""},[...e[18]||(e[18]=[t("option",{value:""},"เลือกประเภท",-1),t("option",{value:"percentage"},"ลดเปอร์เซ็นต์",-1),t("option",{value:"fixed_amount"},"ลดจำนวนเงิน",-1),t("option",{value:"buy_x_get_y"},"ซื้อ X แถม Y",-1)])],2),[[S,r(s).type]]),r(s).errors.type?(i(),d("div",L,a(r(s).errors.type),1)):l("",!0)]),t("div",T,[e[20]||(e[20]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"รายละเอียด",-1)),m(t("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=o=>r(s).description=o),rows:"3",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.description}])},null,2),[[g,r(s).description]]),r(s).errors.description?(i(),d("div",X,a(r(s).errors.description),1)):l("",!0)])])]),t("div",Y,[e[32]||(e[32]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ค่าโปรโมชั่น",-1)),t("div",G,[r(s).type==="percentage"?(i(),d("div",H,[e[23]||(e[23]=t("label",{for:"value",class:"block text-sm font-medium text-gray-700"},"เปอร์เซ็นต์ส่วนลด *",-1)),t("div",J,[m(t("input",{id:"value","onUpdate:modelValue":e[3]||(e[3]=o=>r(s).value=o),type:"number",step:"0.01",min:"0",max:"100",class:u(["block w-full pr-12 border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.value}]),required:""},null,2),[[g,r(s).value]]),e[22]||(e[22]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"%")],-1))]),r(s).errors.value?(i(),d("div",K,a(r(s).errors.value),1)):l("",!0)])):l("",!0),r(s).type==="fixed_amount"?(i(),d("div",P,[e[25]||(e[25]=t("label",{for:"value",class:"block text-sm font-medium text-gray-700"},"จำนวนเงินส่วนลด *",-1)),t("div",Q,[m(t("input",{id:"value","onUpdate:modelValue":e[4]||(e[4]=o=>r(s).value=o),type:"number",step:"0.01",min:"0",class:u(["block w-full pr-12 border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.value}]),required:""},null,2),[[g,r(s).value]]),e[24]||(e[24]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"฿")],-1))]),r(s).errors.value?(i(),d("div",R,a(r(s).errors.value),1)):l("",!0)])):l("",!0),r(s).type==="buy_x_get_y"?(i(),d("div",W,[t("div",Z,[t("div",null,[e[26]||(e[26]=t("label",{for:"minimum_quantity",class:"block text-sm font-medium text-gray-700"},"ซื้อขั้นต่ำ *",-1)),m(t("input",{id:"minimum_quantity","onUpdate:modelValue":e[5]||(e[5]=o=>r(s).minimum_quantity=o),type:"number",min:"1",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.minimum_quantity}]),required:""},null,2),[[g,r(s).minimum_quantity]]),r(s).errors.minimum_quantity?(i(),d("div",$,a(r(s).errors.minimum_quantity),1)):l("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{for:"free_quantity",class:"block text-sm font-medium text-gray-700"},"แถมฟรี *",-1)),m(t("input",{id:"free_quantity","onUpdate:modelValue":e[6]||(e[6]=o=>r(s).free_quantity=o),type:"number",min:"1",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.free_quantity}]),required:""},null,2),[[g,r(s).free_quantity]]),r(s).errors.free_quantity?(i(),d("div",ee,a(r(s).errors.free_quantity),1)):l("",!0)])])])):l("",!0),r(s).type==="percentage"||r(s).type==="fixed_amount"?(i(),d("div",te,[e[29]||(e[29]=t("label",{for:"minimum_amount",class:"block text-sm font-medium text-gray-700"},"ยอดขั้นต่ำ",-1)),t("div",re,[m(t("input",{id:"minimum_amount","onUpdate:modelValue":e[7]||(e[7]=o=>r(s).minimum_amount=o),type:"number",step:"0.01",min:"0",class:u(["block w-full pr-12 border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.minimum_amount}])},null,2),[[g,r(s).minimum_amount]]),e[28]||(e[28]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"฿")],-1))]),r(s).errors.minimum_amount?(i(),d("div",se,a(r(s).errors.minimum_amount),1)):l("",!0)])):l("",!0),r(s).type==="percentage"?(i(),d("div",oe,[e[31]||(e[31]=t("label",{for:"maximum_discount",class:"block text-sm font-medium text-gray-700"},"ส่วนลดสูงสุด",-1)),t("div",ie,[m(t("input",{id:"maximum_discount","onUpdate:modelValue":e[8]||(e[8]=o=>r(s).maximum_discount=o),type:"number",step:"0.01",min:"0",class:u(["block w-full pr-12 border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.maximum_discount}])},null,2),[[g,r(s).maximum_discount]]),e[30]||(e[30]=t("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[t("span",{class:"text-gray-500 sm:text-sm"},"฿")],-1))]),r(s).errors.maximum_discount?(i(),d("div",de,a(r(s).errors.maximum_discount),1)):l("",!0)])):l("",!0)])]),t("div",ne,[e[35]||(e[35]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ระยะเวลาโปรโมชั่น",-1)),t("div",le,[t("div",null,[e[33]||(e[33]=t("label",{for:"start_date",class:"block text-sm font-medium text-gray-700"},"วันที่เริ่มต้น *",-1)),m(t("input",{id:"start_date","onUpdate:modelValue":e[9]||(e[9]=o=>r(s).start_date=o),type:"datetime-local",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.start_date}]),required:""},null,2),[[g,r(s).start_date]]),r(s).errors.start_date?(i(),d("div",ae,a(r(s).errors.start_date),1)):l("",!0)]),t("div",null,[e[34]||(e[34]=t("label",{for:"end_date",class:"block text-sm font-medium text-gray-700"},"วันที่สิ้นสุด *",-1)),m(t("input",{id:"end_date","onUpdate:modelValue":e[10]||(e[10]=o=>r(s).end_date=o),type:"datetime-local",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.end_date}]),required:""},null,2),[[g,r(s).end_date]]),r(s).errors.end_date?(i(),d("div",me,a(r(s).errors.end_date),1)):l("",!0)])])]),t("div",ue,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"สินค้าที่ใช้โปรโมชั่น",-1)),t("div",ge,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"หมวดหมู่สินค้า",-1)),t("div",pe,[(i(!0),d(w,null,k(p.categories,o=>(i(),d("label",{key:o.id,class:"flex items-center space-x-2 p-2 border rounded-md hover:bg-gray-100 cursor-pointer"},[m(t("input",{"onUpdate:modelValue":e[11]||(e[11]=y=>r(s).applicable_categories=y),value:o.id,type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50"},null,8,ce),[[_,r(s).applicable_categories]]),t("span",be,a(o.name),1)]))),128))])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"สินค้า",-1)),t("div",fe,[(i(!0),d(w,null,k(p.products,o=>(i(),d("label",{key:o.id,class:"flex items-center space-x-2 p-2 border rounded-md hover:bg-gray-100 cursor-pointer"},[m(t("input",{"onUpdate:modelValue":e[12]||(e[12]=y=>r(s).applicable_products=y),value:o.id,type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50"},null,8,ye),[[_,r(s).applicable_products]]),t("span",xe,a(o.name),1)]))),128))])])])]),t("div",ve,[e[44]||(e[44]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"จำกัดการใช้งาน",-1)),t("div",_e,[t("div",null,[e[39]||(e[39]=t("label",{for:"usage_limit",class:"block text-sm font-medium text-gray-700"},"จำนวนครั้งที่ใช้ได้",-1)),m(t("input",{id:"usage_limit","onUpdate:modelValue":e[13]||(e[13]=o=>r(s).usage_limit=o),type:"number",min:"0",class:u(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",{"border-red-500":r(s).errors.usage_limit}]),placeholder:"ไม่จำกัด"},null,2),[[g,r(s).usage_limit]]),r(s).errors.usage_limit?(i(),d("div",ke,a(r(s).errors.usage_limit),1)):l("",!0),e[40]||(e[40]=t("p",{class:"mt-1 text-sm text-gray-500"},"เว้นว่างหรือใส่ 0 หากไม่ต้องการจำกัด",-1))]),t("div",null,[e[41]||(e[41]=t("label",{for:"used_count",class:"block text-sm font-medium text-gray-700"},"จำนวนครั้งที่ใช้แล้ว",-1)),t("input",{id:"used_count",value:p.promotion.used_count,type:"number",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm bg-gray-100",readonly:""},null,8,we),e[42]||(e[42]=t("p",{class:"mt-1 text-sm text-gray-500"},"ข้อมูลนี้อัปเดตอัตโนมัติ",-1))]),t("div",qe,[m(t("input",{id:"is_active","onUpdate:modelValue":e[14]||(e[14]=o=>r(s).is_active=o),type:"checkbox",class:"rounded border-gray-300 text-green-600 shadow-sm focus:border-green-300 focus:ring focus:ring-green-200 focus:ring-opacity-50"},null,512),[[_,r(s).is_active]]),e[43]||(e[43]=t("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900"}," เปิดใช้งานโปรโมชั่น ",-1))])])]),t("div",Ve,[b(r(v),{href:f.route("promotions.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-400 focus:bg-gray-400 active:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:c(()=>[...e[45]||(e[45]=[x(" ยกเลิก ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50"},[r(s).processing?(i(),d("span",Ue,"กำลังอัปเดต...")):(i(),d("span",Se,"อัปเดตโปรโมชั่น"))],8,he)])],32)])])])])]),_:1}))}};export{Fe as default};

import{z as I,o as W,J as P,E as F,a as f,c as M,j as u,w as r,e as g,d as e,T as $,K as S,n as h,y as E,i as T,H as G,L as J,t as a,g as w,r as v,u as K,x as k,m as y,k as b,v as q,f as j,h as Q,F as R,G as X}from"./app-6a986ce6.js";import{A as D}from"./AppLayout-c0397362.js";import{_ as L}from"./Pagination-748b230d.js";import{_ as Y}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./ApplicationLogo-88d45659.js";const Z={class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50","scroll-region":""},ee={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(o,{emit:n}){const l=o,p=n,x=I(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[l.maxWidth]),m=c=>{c.key==="Escape"&&l.show&&d()};W(()=>document.addEventListener("keydown",m)),P(()=>{document.removeEventListener("keydown",m),document.body.style.overflow=null});const d=()=>{l.closeable&&p("close")};return F(()=>l.show,()=>{l.show?document.body.style.overflow="hidden":document.body.style.overflow=null}),(c,_)=>(f(),M(G,{to:"body"},[u($,{"leave-active-class":"duration-200"},{default:r(()=>[g(e("div",Z,[u($,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:r(()=>[g(e("div",{class:"fixed inset-0 transform transition-all",onClick:d},[..._[0]||(_[0]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])],512),[[S,o.show]])]),_:1}),u($,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:r(()=>[g(e("div",{class:h(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",x.value])},[o.show?E(c.$slots,"default",{key:0}):T("",!0)],2),[[S,o.show]])]),_:3})],512),[[S,o.show]])]),_:3})]))}},te={name:"ConfirmationModal",components:{Modal:ee},props:{show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},confirmText:{type:String,default:""},cancelText:{type:String,default:""}},emits:["close","confirm"]},se={class:"p-6"},oe={class:"mt-3 text-center sm:mt-5"},le={class:"text-lg leading-6 font-medium text-gray-900"},ne={class:"mt-2"},ae={class:"text-sm text-gray-500"},re={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"};function ie(o,n,l,p,x,m){const d=J("Modal");return f(),M(d,{show:l.show,onClose:n[2]||(n[2]=c=>o.$emit("close")),"max-width":"md"},{default:r(()=>[e("div",se,[n[3]||(n[3]=e("div",{class:"flex items-center"},[e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",oe,[e("h3",le,a(l.title||"ยืนยันการดำเนินการ"),1),e("div",ne,[e("p",ae,a(l.message||"คุณแน่ใจหรือไม่ที่จะดำเนินการนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้"),1)])]),e("div",re,[e("button",{type:"button",onClick:n[0]||(n[0]=c=>o.$emit("confirm")),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:col-start-2 sm:text-sm"},a(l.confirmText||"ยืนยัน"),1),e("button",{type:"button",onClick:n[1]||(n[1]=c=>o.$emit("close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm"},a(l.cancelText||"ยกเลิก"),1)])])]),_:1},8,["show"])}const z=Y(te,[["render",ie]]),de=["type"],V={__name:"SecondaryButton",props:{type:{type:String,default:"button"}},setup(o){return(n,l)=>(f(),w("button",{type:o.type,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:text-gray-500 focus:outline-none disabled:opacity-25 transition ease-in-out duration-150",style:{"border-color":"#E2E8F0",color:"#2D3748"},onmouseover:"this.style.color='#4A5568'",onmouseout:"this.style.color='#2D3748'",onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[E(n.$slots,"default")],8,de))}},ce=["type"],H={__name:"DangerButton",props:{type:{type:String,default:"button"}},setup(o){return(n,l)=>(f(),w("button",{type:o.type,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red disabled:opacity-25 transition ease-in-out duration-150"},[E(n.$slots,"default")],8,ce))}},ue={class:"py-12"},me={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},xe={class:"p-6 bg-white border-b border-gray-200"},fe={class:"mb-6 flex justify-between items-center"},ye={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ge={class:"bg-blue-50 p-4 rounded-lg"},ve={class:"flex items-center"},be={class:"ml-4"},he={class:"text-2xl font-bold text-blue-900"},we={class:"bg-green-50 p-4 rounded-lg"},_e={class:"flex items-center"},ke={class:"ml-4"},Ce={class:"text-2xl font-bold text-green-900"},Be={class:"bg-yellow-50 p-4 rounded-lg"},$e={class:"flex items-center"},Se={class:"ml-4"},Me={class:"text-2xl font-bold text-yellow-900"},Ee={class:"bg-purple-50 p-4 rounded-lg"},je={class:"flex items-center"},Fe={class:"ml-4"},Te={class:"text-2xl font-bold text-purple-900"},De={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},Le={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},ze={class:"min-w-full divide-y divide-gray-200"},Ve={class:"bg-white divide-y divide-gray-200"},He={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ae={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"text-sm font-medium text-gray-900"},Oe={key:0,class:"text-sm text-gray-500"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Je={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},qe={class:"flex space-x-2"},Qe=["onClick"],Re={class:"mt-6"},Xe={components:{AppLayout:D,Link:k,Pagination:L,ConfirmationModal:z,SecondaryButton:V,DangerButton:H}},lt=Object.assign(Xe,{__name:"Index",props:{customers:Object,filters:Object,stats:Object},setup(o){const n=o,l=v(n.filters.search||""),p=v(n.filters.customer_type||""),x=v(n.filters.is_active||""),m=v(!1),d=v(null),c=K({});F([l,p,x],()=>{X.get(route("customers.index"),{search:l.value,customer_type:p.value,is_active:x.value},{preserveState:!0,replace:!0})},{debounce:300});const _=()=>{l.value="",p.value="",x.value=""},C=i=>new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0),A=i=>({individual:"บุคคลธรรมดา",company:"บริษัท",contractor:"ผู้รับเหมา"})[i]||i,N=i=>({individual:"bg-blue-100 text-blue-800",company:"bg-green-100 text-green-800",contractor:"bg-purple-100 text-purple-800"})[i]||"bg-gray-100 text-gray-800",O=i=>{d.value=i,m.value=!0},U=()=>{c.delete(route("customers.destroy",d.value.id),{onSuccess:()=>{m.value=!1,d.value=null}})};return(i,t)=>(f(),M(D,{title:"จัดการลูกค้า"},{header:r(()=>[...t[5]||(t[5]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," จัดการลูกค้า ",-1)])]),default:r(()=>[e("div",ue,[e("div",me,[e("div",pe,[e("div",xe,[e("div",fe,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold text-gray-900"},"จัดการลูกค้า",-1)),u(b(k),{href:i.route("customers.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest disabled:opacity-25 transition ease-in-out duration-150",style:{"background-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:r(()=>[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),y(" เพิ่มลูกค้าใหม่ ",-1)])]),_:1},8,["href"])]),e("div",ye,[e("div",ge,[e("div",ve,[t[9]||(t[9]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",be,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-blue-600"},"ลูกค้าทั้งหมด",-1)),e("p",he,a(o.stats.total_customers),1)])])]),e("div",we,[e("div",_e,[t[11]||(t[11]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ke,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-green-600"},"ลูกค้าที่ใช้งาน",-1)),e("p",Ce,a(o.stats.active_customers),1)])])]),e("div",Be,[e("div",$e,[t[13]||(t[13]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Se,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-yellow-600"},"ยอดค้างชำระ",-1)),e("p",Me,"฿"+a(C(o.stats.total_balance)),1)])])]),e("div",Ee,[e("div",je,[t[15]||(t[15]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1)),e("div",Fe,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-purple-600"},"วงเงินเครดิต",-1)),e("p",Te,"฿"+a(C(o.stats.total_credit_limit)),1)])])])]),e("div",De,[e("div",null,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),type:"text",placeholder:"ค้นหาลูกค้า...",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},null,512),[[q,l.value]])]),e("div",null,[g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...t[16]||(t[16]=[e("option",{value:""},"ประเภททั้งหมด",-1),e("option",{value:"individual"},"บุคคลธรรมดา",-1),e("option",{value:"company"},"บริษัท",-1),e("option",{value:"contractor"},"ผู้รับเหมา",-1)])],512),[[j,p.value]])]),e("div",null,[g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...t[17]||(t[17]=[e("option",{value:""},"สถานะทั้งหมด",-1),e("option",{value:"1"},"ใช้งาน",-1),e("option",{value:"0"},"ไม่ใช้งาน",-1)])],512),[[j,x.value]])]),e("div",null,[e("button",{onClick:_,class:"w-full px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-150 ease-in-out"}," ล้างตัวกรอง ")])]),e("div",Le,[e("table",ze,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รหัสลูกค้า "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ชื่อลูกค้า "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," เบอร์โทร "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Line ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ประเภท "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ยอดค้างชำระ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," จำนวนคำสั่งซื้อ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," สถานะ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," การจัดการ ")])],-1)),e("tbody",Ve,[(f(!0),w(R,null,Q(o.customers.data,s=>(f(),w("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",He,a(s.customer_code),1),e("td",Ae,[e("div",Ne,a(s.name||s.company_name),1),s.email?(f(),w("div",Oe,a(s.email),1)):T("",!0)]),e("td",Ue,a(s.phone),1),e("td",Ie,a(s.line_id||"-"),1),e("td",We,[e("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",N(s.customer_type)])},a(A(s.customer_type)),3)]),e("td",Pe,[e("span",{class:h(s.current_balance>0?"text-red-600 font-semibold":"text-gray-900")}," ฿"+a(C(s.current_balance)),3)]),e("td",Ge,a(s.sales_count),1),e("td",Je,[e("span",{class:h(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(s.is_active?"ใช้งาน":"ไม่ใช้งาน"),3)]),e("td",Ke,[e("div",qe,[u(b(k),{href:i.route("customers.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:r(()=>[...t[18]||(t[18]=[y(" ดู ",-1)])]),_:1},8,["href"]),u(b(k),{href:i.route("customers.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:r(()=>[...t[19]||(t[19]=[y(" แก้ไข ",-1)])]),_:1},8,["href"]),e("button",{onClick:B=>O(s),class:"text-red-600 hover:text-red-900"}," ลบ ",8,Qe)])])]))),128))])])]),e("div",Re,[u(L,{links:o.customers.links},null,8,["links"])])])])])]),u(z,{show:m.value,onClose:t[4]||(t[4]=s=>m.value=!1)},{title:r(()=>[...t[21]||(t[21]=[y(" ยืนยันการลบลูกค้า ",-1)])]),content:r(()=>{var s,B;return[y(' คุณแน่ใจหรือไม่ที่จะลบลูกค้า "'+a(((s=d.value)==null?void 0:s.name)||((B=d.value)==null?void 0:B.company_name))+'"? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ',1)]}),footer:r(()=>[u(V,{onClick:t[3]||(t[3]=s=>m.value=!1)},{default:r(()=>[...t[22]||(t[22]=[y(" ยกเลิก ",-1)])]),_:1}),u(H,{class:h(["ml-3",{"opacity-25":b(c).processing}]),onClick:U,disabled:b(c).processing},{default:r(()=>[...t[23]||(t[23]=[y(" ลบลูกค้า ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}});export{lt as default};

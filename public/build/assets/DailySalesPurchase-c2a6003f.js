import{r as c,z as p,o as q,a as r,c as C,w as v,d as t,e as b,v as V,f as B,g as l,h as y,t as o,F as g,i as u}from"./app-cfb3a24f.js";import{A as I}from"./AppLayout-e7d94700.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./ApplicationLogo-506cd769.js";const E={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"bg-white rounded-lg shadow-md p-6 mb-6"},N={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R=["value"],O={class:"bg-white rounded-lg shadow-md p-6 mb-6"},U={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},j={class:"bg-white divide-y divide-gray-200"},z={class:"px-4 py-3 text-sm"},H={class:"px-4 py-3 text-sm"},K={class:"px-4 py-3 text-sm font-medium"},Q={class:"px-4 py-3 text-sm text-center"},X={class:"px-4 py-3 text-sm text-right text-blue-600"},G={class:"px-4 py-3 text-sm text-right text-green-600"},J={class:"px-4 py-3 text-sm text-right text-red-600 font-semibold"},W={class:"px-4 py-3 text-sm text-right text-red-600"},Y={class:"px-4 py-3 text-sm text-right text-green-600 font-semibold"},Z={class:"px-4 py-3 text-sm text-right text-green-600"},tt={class:"px-4 py-3 text-sm text-right font-semibold"},et={class:"px-4 py-3 text-sm text-gray-500"},st={key:0},ot={key:1,class:"bg-gray-100 font-bold"},at={class:"px-4 py-3 text-sm text-right text-red-600"},rt={class:"px-4 py-3 text-sm text-right text-red-600"},lt={class:"px-4 py-3 text-sm text-right text-green-600"},dt={class:"px-4 py-3 text-sm text-right text-green-600"},nt={class:"bg-white rounded-lg shadow-md p-6"},xt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200"},pt={class:"bg-white divide-y divide-gray-200"},ct={class:"px-4 py-3 text-sm"},ut={class:"px-4 py-3 text-sm"},yt={class:"px-4 py-3 text-sm font-medium"},gt={class:"px-4 py-3 text-sm text-center"},mt={class:"px-4 py-3 text-sm text-right font-semibold"},_t={class:"px-4 py-3 text-sm text-right"},ht={class:"px-4 py-3 text-sm text-right font-semibold text-blue-600"},ft={class:"px-4 py-3 text-sm text-center"},vt={key:0,class:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800"},bt={key:1,class:"text-gray-400"},wt={key:0},kt={key:1,class:"bg-gray-100 font-bold"},Dt={class:"px-4 py-3 text-sm text-right"},St={class:"px-4 py-3 text-sm text-right text-blue-600"},Ft={__name:"DailySalesPurchase",props:{categories:Array,initialDate:String},setup(m){const n=c({date:m.initialDate||new Date().toISOString().split("T")[0],category_id:""}),x=c([]),i=c([]),_=c(!1),w=p(()=>x.value.reduce((a,e)=>a+(e.sold_quantity||0),0)),k=p(()=>x.value.reduce((a,e)=>a+(e.purchased_quantity||0),0)),D=p(()=>x.value.reduce((a,e)=>a+(parseFloat(e.total_sales_amount)||0),0)),S=p(()=>x.value.reduce((a,e)=>a+(parseFloat(e.total_purchase_amount)||0),0)),F=p(()=>i.value.reduce((a,e)=>a+e.current_stock,0)),A=p(()=>i.value.reduce((a,e)=>a+e.inventory_value,0)),h=a=>new Date(a).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}),d=a=>parseFloat(a||0).toFixed(2),f=async()=>{_.value=!0;try{const e=await(await fetch(`/api/reports/daily-sales-purchase?date=${n.value.date}&category_id=${n.value.category_id}`,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();x.value=e.sales_data||[],i.value=e.inventory_data||[]}catch(a){console.error("Error loading report:",a),alert("เกิดข้อผิดพลาดในการโหลดรายงาน")}finally{_.value=!1}},P=()=>{window.print()};return q(()=>{f()}),(a,e)=>(r(),C(I,{title:"รายงานยอดขาย-ซื้อรายวัน"},{header:v(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," รายงานยอดขาย-ซื้อรายวัน และสินค้าคงคลัง ",-1)])]),default:v(()=>[t("div",E,[t("div",L,[t("div",M,[t("div",N,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"วันที่",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.value.date=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,n.value.date]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"หมวดหมู่",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.category_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[4]||(e[4]=t("option",{value:""},"ทั้งหมด",-1)),(r(!0),l(g,null,y(m.categories,s=>(r(),l("option",{key:s.id,value:s.id},o(s.name),9,R))),128))],512),[[B,n.value.category_id]])]),t("div",{class:"flex items-end"},[t("button",{onClick:f,class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," ค้นหา ")]),t("div",{class:"flex items-end"},[t("button",{onClick:P,class:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," พิมพ์รายงาน ")])])]),t("div",O,[e[10]||(e[10]=t("h3",{class:"text-lg font-bold mb-4 text-gray-800"},"รายงานยอดขาย-ซื้อรายวัน",-1)),t("div",U,[t("table",$,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"วันที่"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"รหัสสินค้า"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ชื่อสินค้า"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมวดหมู่"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาทุน"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาขาย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ขาย (ชิ้น)"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าขาย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ซื้อ (ชิ้น)"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าซื้อ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"คงเหลือ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"หมายเหตุ")])],-1)),t("tbody",j,[(r(!0),l(g,null,y(x.value,s=>(r(),l("tr",{key:s.product_id,class:"hover:bg-gray-50"},[t("td",z,o(h(n.value.date)),1),t("td",H,o(s.sku),1),t("td",K,o(s.product_name),1),t("td",Q,o(s.category_name),1),t("td",X," ฿"+o(d(s.cost_price)),1),t("td",G," ฿"+o(d(s.selling_price)),1),t("td",J,o(s.sold_quantity||"-"),1),t("td",W," ฿"+o(d(s.total_sales_amount)),1),t("td",Y,o(s.purchased_quantity||"-"),1),t("td",Z," ฿"+o(d(s.total_purchase_amount)),1),t("td",tt,o(s.current_stock),1),t("td",et,o(s.notes||"-"),1)]))),128)),x.value.length===0?(r(),l("tr",st,[...e[6]||(e[6]=[t("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," ไม่พบข้อมูล ",-1)])])):u("",!0),x.value.length>0?(r(),l("tr",ot,[e[7]||(e[7]=t("td",{colspan:"6",class:"px-4 py-3 text-sm text-right"},"รวม:",-1)),t("td",at,o(w.value),1),t("td",rt," ฿"+o(d(D.value)),1),t("td",lt,o(k.value),1),t("td",dt," ฿"+o(d(S.value)),1),e[8]||(e[8]=t("td",{colspan:"2"},null,-1))])):u("",!0)])])])]),t("div",nt,[e[16]||(e[16]=t("h3",{class:"text-lg font-bold mb-4 text-gray-800"},"สรุปสินค้าคงคลัง",-1)),t("div",xt,[t("table",it,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"วันที่"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"รหัสสินค้า"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ชื่อสินค้า"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมวดหมู่"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"จำนวนคงเหลือ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาทุน/หน่วย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าคงเหลือ"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมายเหตุ")])],-1)),t("tbody",pt,[(r(!0),l(g,null,y(i.value,s=>(r(),l("tr",{key:s.product_id,class:"hover:bg-gray-50"},[t("td",ct,o(h(n.value.date)),1),t("td",ut,o(s.sku),1),t("td",yt,o(s.product_name),1),t("td",gt,o(s.category_name),1),t("td",mt,o(s.current_stock),1),t("td",_t," ฿"+o(d(s.cost_price)),1),t("td",ht," ฿"+o(d(s.inventory_value)),1),t("td",ft,[s.current_stock<=s.reorder_point?(r(),l("span",vt," ต่ำกว่าจุดสั่งซื้อ ")):(r(),l("span",bt,"-"))])]))),128)),i.value.length===0?(r(),l("tr",wt,[...e[11]||(e[11]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," ไม่พบข้อมูล ",-1)])])):u("",!0),i.value.length>0?(r(),l("tr",kt,[e[12]||(e[12]=t("td",{colspan:"4",class:"px-4 py-3 text-sm text-right"},"รวมมูลค่าคงคลัง:",-1)),t("td",Dt,o(F.value),1),e[13]||(e[13]=t("td",null,null,-1)),t("td",St," ฿"+o(d(A.value)),1),e[14]||(e[14]=t("td",null,null,-1))])):u("",!0)])])])])])])]),_:1}))}},It=T(Ft,[["__scopeId","data-v-4f6fa837"]]);export{It as default};

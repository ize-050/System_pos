import{r as u,z as p,o as C,a as r,c as P,w as f,d as t,t as o,e as b,v as V,f as B,g as l,h as g,F as m,i as c}from"./app-52dfa1a6.js";import{A as T}from"./AppLayout-39f8b0fe.js";/* empty css            */import"./ApplicationLogo-8547e154.js";import"./_plugin-vue_export-helper-c27b6911.js";const E={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"print-header hidden print:block mb-6 text-center"},M={class:"text-gray-600"},N={class:"bg-white rounded-lg shadow-md p-6 mb-6 no-print"},R={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},O=["value"],U={class:"bg-white rounded-lg shadow-md p-6 mb-6"},$={class:"overflow-x-auto"},j={class:"min-w-full divide-y divide-gray-200"},z={class:"bg-white divide-y divide-gray-200"},H={class:"px-4 py-3 text-sm"},K={class:"px-4 py-3 text-sm"},Q={class:"px-4 py-3 text-sm font-medium"},X={class:"px-4 py-3 text-sm text-center"},G={class:"px-4 py-3 text-sm text-right text-blue-600"},J={class:"px-4 py-3 text-sm text-right text-green-600"},W={class:"px-4 py-3 text-sm text-right text-red-600 font-semibold"},Y={class:"px-4 py-3 text-sm text-right text-red-600"},Z={class:"px-4 py-3 text-sm text-right text-green-600 font-semibold"},tt={class:"px-4 py-3 text-sm text-right text-green-600"},et={class:"px-4 py-3 text-sm text-right font-semibold"},st={class:"px-4 py-3 text-sm text-gray-500"},ot={key:0},at={key:1,class:"bg-gray-100 font-bold"},rt={class:"px-4 py-3 text-sm text-right text-red-600"},lt={class:"px-4 py-3 text-sm text-right text-red-600"},dt={class:"px-4 py-3 text-sm text-right text-green-600"},nt={class:"px-4 py-3 text-sm text-right text-green-600"},xt={class:"bg-white rounded-lg shadow-md p-6"},it={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},ut={class:"bg-white divide-y divide-gray-200"},ct={class:"px-4 py-3 text-sm"},yt={class:"px-4 py-3 text-sm"},gt={class:"px-4 py-3 text-sm font-medium"},mt={class:"px-4 py-3 text-sm text-center"},ht={class:"px-4 py-3 text-sm text-right font-semibold"},_t={class:"px-4 py-3 text-sm text-right"},vt={class:"px-4 py-3 text-sm text-right font-semibold text-blue-600"},ft={class:"px-4 py-3 text-sm text-center"},bt={key:0,class:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800"},wt={key:1,class:"text-gray-400"},kt={key:0},Dt={key:1,class:"bg-gray-100 font-bold"},St={class:"px-4 py-3 text-sm text-right"},Ft={class:"px-4 py-3 text-sm text-right text-blue-600"},Tt={__name:"DailySalesPurchase",props:{categories:Array,initialDate:String},setup(h){const d=u({date:h.initialDate||new Date().toISOString().split("T")[0],category_id:""}),x=u([]),i=u([]),_=u(!1),w=p(()=>x.value.reduce((a,e)=>a+(e.sold_quantity||0),0)),k=p(()=>x.value.reduce((a,e)=>a+(e.purchased_quantity||0),0)),D=p(()=>x.value.reduce((a,e)=>a+(parseFloat(e.total_sales_amount)||0),0)),S=p(()=>x.value.reduce((a,e)=>a+(parseFloat(e.total_purchase_amount)||0),0)),F=p(()=>i.value.reduce((a,e)=>a+e.current_stock,0)),A=p(()=>i.value.reduce((a,e)=>a+e.inventory_value,0)),y=a=>new Date(a).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"}),n=a=>parseFloat(a||0).toFixed(2),v=async()=>{_.value=!0;try{const e=await(await fetch(`/api/reports/daily-sales-purchase?date=${d.value.date}&category_id=${d.value.category_id}`,{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();x.value=e.sales_data||[],i.value=e.inventory_data||[]}catch(a){console.error("Error loading report:",a),alert("เกิดข้อผิดพลาดในการโหลดรายงาน")}finally{_.value=!1}},q=()=>{window.print()};return C(()=>{v()}),(a,e)=>(r(),P(T,{title:"รายงานยอดขาย-ซื้อรายวัน"},{header:f(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," รายงานยอดขาย-ซื้อรายวัน และสินค้าคงคลัง ",-1)])]),default:f(()=>[t("div",E,[t("div",I,[t("div",L,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold"},"รายงานยอดขาย-ซื้อรายวัน",-1)),t("p",M,"วันที่: "+o(y(d.value.date)),1)]),t("div",N,[t("div",R,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"วันที่",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value.date=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[V,d.value.date]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"หมวดหมู่",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.value.category_id=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[5]||(e[5]=t("option",{value:""},"ทั้งหมด",-1)),(r(!0),l(m,null,g(h.categories,s=>(r(),l("option",{key:s.id,value:s.id},o(s.name),9,O))),128))],512),[[B,d.value.category_id]])]),t("div",{class:"flex items-end"},[t("button",{onClick:v,class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," ค้นหา ")]),t("div",{class:"flex items-end"},[t("button",{onClick:q,class:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," พิมพ์รายงาน ")])])]),t("div",U,[e[11]||(e[11]=t("h3",{class:"text-lg font-bold mb-4 text-gray-800"},"รายงานยอดขาย-ซื้อรายวัน",-1)),t("div",$,[t("table",j,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"วันที่"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"รหัสสินค้า"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ชื่อสินค้า"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมวดหมู่"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาทุน"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาขาย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ขาย (ชิ้น)"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าขาย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ซื้อ (ชิ้น)"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าซื้อ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"คงเหลือ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"หมายเหตุ")])],-1)),t("tbody",z,[(r(!0),l(m,null,g(x.value,s=>(r(),l("tr",{key:s.product_id,class:"hover:bg-gray-50"},[t("td",H,o(y(d.value.date)),1),t("td",K,o(s.sku),1),t("td",Q,o(s.product_name),1),t("td",X,o(s.category_name),1),t("td",G," ฿"+o(n(s.cost_price)),1),t("td",J," ฿"+o(n(s.selling_price)),1),t("td",W,o(s.sold_quantity||"-"),1),t("td",Y," ฿"+o(n(s.total_sales_amount)),1),t("td",Z,o(s.purchased_quantity||"-"),1),t("td",tt," ฿"+o(n(s.total_purchase_amount)),1),t("td",et,o(s.current_stock),1),t("td",st,o(s.notes||"-"),1)]))),128)),x.value.length===0?(r(),l("tr",ot,[...e[7]||(e[7]=[t("td",{colspan:"12",class:"px-4 py-8 text-center text-gray-500"}," ไม่พบข้อมูล ",-1)])])):c("",!0),x.value.length>0?(r(),l("tr",at,[e[8]||(e[8]=t("td",{colspan:"6",class:"px-4 py-3 text-sm text-right"},"รวม:",-1)),t("td",rt,o(w.value),1),t("td",lt," ฿"+o(n(D.value)),1),t("td",dt,o(k.value),1),t("td",nt," ฿"+o(n(S.value)),1),e[9]||(e[9]=t("td",{colspan:"2"},null,-1))])):c("",!0)])])])]),t("div",xt,[e[17]||(e[17]=t("h3",{class:"text-lg font-bold mb-4 text-gray-800"},"สรุปสินค้าคงคลัง",-1)),t("div",it,[t("table",pt,[e[16]||(e[16]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"วันที่"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"รหัสสินค้า"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ชื่อสินค้า"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมวดหมู่"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"จำนวนคงเหลือ"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคาทุน/หน่วย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"มูลค่าคงเหลือ"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"หมายเหตุ")])],-1)),t("tbody",ut,[(r(!0),l(m,null,g(i.value,s=>(r(),l("tr",{key:s.product_id,class:"hover:bg-gray-50"},[t("td",ct,o(y(d.value.date)),1),t("td",yt,o(s.sku),1),t("td",gt,o(s.product_name),1),t("td",mt,o(s.category_name),1),t("td",ht,o(s.current_stock),1),t("td",_t," ฿"+o(n(s.cost_price)),1),t("td",vt," ฿"+o(n(s.inventory_value)),1),t("td",ft,[s.current_stock<=s.reorder_point?(r(),l("span",bt," ต่ำกว่าจุดสั่งซื้อ ")):(r(),l("span",wt,"-"))])]))),128)),i.value.length===0?(r(),l("tr",kt,[...e[12]||(e[12]=[t("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," ไม่พบข้อมูล ",-1)])])):c("",!0),i.value.length>0?(r(),l("tr",Dt,[e[13]||(e[13]=t("td",{colspan:"4",class:"px-4 py-3 text-sm text-right"},"รวมมูลค่าคงคลัง:",-1)),t("td",St,o(F.value),1),e[14]||(e[14]=t("td",null,null,-1)),t("td",Ft," ฿"+o(n(A.value)),1),e[15]||(e[15]=t("td",null,null,-1))])):c("",!0)])])])])])])]),_:1}))}};export{Tt as default};

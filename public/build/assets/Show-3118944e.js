import{a as l,d as h,e as u,b as t,t as a,i as b,p as c,l as x,z as g,j as i,q as $,c as d,k as P,F as T,I as B}from"./app-6ba43703.js";import{A as F}from"./AppLayout-ac0cd7e0.js";/* empty css            */import"./ApplicationLogo-9fe9ca86.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                                  */const L={class:"flex justify-between items-center"},N={class:"font-semibold text-xl text-gray-800 leading-tight"},V={class:"space-x-2"},q={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},I={class:"lg:col-span-2 space-y-6"},M={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Q={class:"p-6"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O={class:"mt-1 text-sm text-gray-900"},G={class:"mt-1 text-sm text-gray-900"},J={class:"mt-1 text-sm text-gray-900"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6"},U={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},W={key:0},X={class:"mt-1 text-sm text-gray-900"},Y={key:1},Z={class:"mt-1 text-sm text-gray-900"},tt={key:2},et={class:"mt-1 text-sm text-gray-900"},st={key:1,class:"text-gray-500 text-sm"},ot={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},at={class:"p-6"},lt={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},nt={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-4 whitespace-nowrap"},rt={class:"flex items-center"},mt={key:0,class:"flex-shrink-0 h-10 w-10"},ut=["src","alt"],ct={class:"ml-4"},xt={class:"text-sm font-medium text-gray-900"},gt={key:0,class:"text-sm text-gray-500"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},bt={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},pt={class:"p-6"},vt={class:"text-sm text-gray-700"},wt={class:"space-y-6"},_t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},kt={class:"p-6"},Bt={class:"space-y-3"},jt={class:"flex justify-between"},St={class:"text-sm font-medium text-gray-900"},Ct={key:0,class:"flex justify-between"},At={class:"text-sm font-medium text-red-600"},Dt={key:1,class:"flex justify-between"},$t={class:"text-sm font-medium text-gray-900"},Pt={class:"border-t pt-3"},Tt={class:"flex justify-between"},Ft={class:"text-base font-bold text-gray-900"},Lt={class:"border-t pt-3 space-y-2"},Nt={class:"flex justify-between"},Vt={class:"text-sm font-medium text-green-600"},qt={class:"flex justify-between"},zt={class:"text-sm font-medium text-blue-600"},Ht={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},It={class:"p-6"},Mt={class:"space-y-3"},Qt={class:"flex justify-between"},Et={class:"text-sm font-medium text-gray-900"},Ot={class:"flex justify-between"},Gt={class:"text-sm font-medium text-gray-900"},Jt={class:"flex justify-between"},Kt={class:"text-sm font-medium text-gray-900"},Rt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ut={class:"p-6"},Wt={class:"space-y-3"},Xt={class:"mt-1 text-sm text-gray-900"},Yt={key:0},Zt={class:"mt-1 text-sm text-gray-900"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ee={class:"p-6"},se={class:"space-y-3"},re={__name:"Show",props:{sale:Object},setup(s){const f=s,r=o=>parseFloat(o||0).toFixed(2),j=o=>({cash:"เงินสด",card:"บัตรเครดิต/เดบิต",bank_transfer:"โอนเงิน",e_wallet:"กระเป๋าเงินอิเล็กทรอนิกส์"})[o]||o,S=o=>({cash:"bg-green-100 text-green-800",card:"bg-blue-100 text-blue-800",bank_transfer:"bg-purple-100 text-purple-800",e_wallet:"bg-orange-100 text-orange-800"})[o]||"bg-gray-100 text-gray-800",C=o=>new Date(o).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}),p=o=>new Date(o).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),v=()=>{var o;return((o=f.sale.items)==null?void 0:o.reduce((e,m)=>e+m.quantity,0))||0},A=()=>{const o=f.sale.items||[];if(o.length===0)return 0;const e=o.reduce((y,n)=>y+n.total_price,0),m=v();return m>0?e/m:0},D=()=>{confirm("คุณแน่ใจหรือไม่ที่จะลบการขายนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้")&&B.delete(route("sales.destroy",f.sale.id),{onSuccess:()=>{B.visit(route("sales.index"))}})};return(o,e)=>(l(),h(F,{title:"รายละเอียดการขาย"},{header:u(()=>[t("div",L,[t("h2",N," การขาย #"+a(s.sale.id.toString().padStart(6,"0")),1),t("div",V,[b(x(g),{href:o.route("sales.receipt",s.sale.id),class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",target:"_blank"},{default:u(()=>[...e[1]||(e[1]=[c(" พิมพ์ใบเสร็จ ",-1)])]),_:1},8,["href"]),o.$page.props.auth.user.role==="admin"||o.$page.props.auth.user.role==="manager"?(l(),h(x(g),{key:0,href:o.route("sales.edit",s.sale.id),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:u(()=>[...e[2]||(e[2]=[c(" แก้ไขการขาย ",-1)])]),_:1},8,["href"])):i("",!0),b(x(g),{href:o.route("sales.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:u(()=>[...e[3]||(e[3]=[c(" กลับไปยังรายการขาย ",-1)])]),_:1},8,["href"])])])]),default:u(()=>{var m,y;return[t("div",q,[t("div",z,[t("div",H,[t("div",I,[t("div",M,[t("div",Q,[e[8]||(e[8]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ภาพรวมการขาย",-1)),t("div",E,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"รหัสการขาย",-1)),t("p",O,"#"+a(s.sale.id.toString().padStart(6,"0")),1)]),t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"วันที่ขาย",-1)),t("p",G,a(C(s.sale.created_at)),1)]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"พนักงานขาย",-1)),t("p",J,a(((m=s.sale.cashier)==null?void 0:m.name)||"ไม่ระบุ"),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"วิธีการชำระเงิน",-1)),t("span",{class:$([S(s.sale.payment_method),"mt-1 px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},a(j(s.sale.payment_method)),3)])])])]),t("div",K,[t("div",R,[e[12]||(e[12]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลลูกค้า",-1)),s.sale.customer_name||s.sale.customer_phone||s.sale.customer_email?(l(),d("div",U,[s.sale.customer_name?(l(),d("div",W,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"ชื่อ",-1)),t("p",X,a(s.sale.customer_name),1)])):i("",!0),s.sale.customer_phone?(l(),d("div",Y,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"เบอร์โทรศัพท์",-1)),t("p",Z,a(s.sale.customer_phone),1)])):i("",!0),s.sale.customer_email?(l(),d("div",tt,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"อีเมล",-1)),t("p",et,a(s.sale.customer_email),1)])):i("",!0)])):(l(),d("div",st," ลูกค้าทั่วไป (ไม่มีข้อมูลลูกค้า) "))])]),t("div",ot,[t("div",at,[e[14]||(e[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"รายการสินค้า",-1)),t("div",lt,[t("table",dt,[e[13]||(e[13]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," สินค้า "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ราคาต่อหน่วย "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," จำนวน "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รวม ")])],-1)),t("tbody",nt,[(l(!0),d(T,null,P(s.sale.items,n=>{var w,_,k;return l(),d("tr",{key:n.id},[t("td",it,[t("div",rt,[(w=n.product)!=null&&w.image?(l(),d("div",mt,[t("img",{class:"h-10 w-10 rounded-full object-cover",src:n.product.image,alt:n.product.name},null,8,ut)])):i("",!0),t("div",ct,[t("div",xt,a(((_=n.product)==null?void 0:_.name)||"ไม่พบสินค้า"),1),(k=n.product)!=null&&k.category?(l(),d("div",gt,a(n.product.category.name),1)):i("",!0)])])]),t("td",yt," ฿"+a(r(n.unit_price)),1),t("td",ft,a(n.quantity),1),t("td",ht," ฿"+a(r(n.total_price)),1)])}),128))])])])])]),s.sale.notes?(l(),d("div",bt,[t("div",pt,[e[15]||(e[15]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"หมายเหตุ",-1)),t("p",vt,a(s.sale.notes),1)])])):i("",!0)]),t("div",wt,[t("div",_t,[t("div",kt,[e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"สรุปการเงิน",-1)),t("div",Bt,[t("div",jt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-600"},"ยอดรวมย่อย:",-1)),t("span",St,"฿"+a(r(s.sale.subtotal)),1)]),s.sale.discount_amount>0?(l(),d("div",Ct,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-600"},"ส่วนลด:",-1)),t("span",At,"-฿"+a(r(s.sale.discount_amount)),1)])):i("",!0),s.sale.tax_amount>0?(l(),d("div",Dt,[e[18]||(e[18]=t("span",{class:"text-sm text-gray-600"},"ภาษี:",-1)),t("span",$t,"฿"+a(r(s.sale.tax_amount)),1)])):i("",!0),t("div",Pt,[t("div",Tt,[e[19]||(e[19]=t("span",{class:"text-base font-medium text-gray-900"},"ยอดรวมทั้งหมด:",-1)),t("span",Ft,"฿"+a(r(s.sale.total_amount)),1)])]),t("div",Lt,[t("div",Nt,[e[20]||(e[20]=t("span",{class:"text-sm text-gray-600"},"จำนวนเงินที่ได้รับ:",-1)),t("span",Vt,"฿"+a(r(s.sale.payment_received)),1)]),t("div",qt,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-600"},"เงินทอน:",-1)),t("span",zt,"฿"+a(r(s.sale.change_amount)),1)])])])])]),t("div",Ht,[t("div",It,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"สถิติการขาย",-1)),t("div",Mt,[t("div",Qt,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600"},"จำนวนรายการสินค้า:",-1)),t("span",Et,a(((y=s.sale.items)==null?void 0:y.length)||0),1)]),t("div",Ot,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600"},"จำนวนสินค้าทั้งหมด:",-1)),t("span",Gt,a(v()),1)]),t("div",Jt,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-600"},"ราคาเฉลี่ยต่อรายการ:",-1)),t("span",Kt,"฿"+a(r(A())),1)])])])]),t("div",Rt,[t("div",Ut,[e[29]||(e[29]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลเวลา",-1)),t("div",Wt,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700"},"วันที่สร้าง",-1)),t("p",Xt,a(p(s.sale.created_at)),1)]),s.sale.updated_at!==s.sale.created_at?(l(),d("div",Yt,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700"},"วันที่อัปเดตล่าสุด",-1)),t("p",Zt,a(p(s.sale.updated_at)),1)])):i("",!0)])])]),t("div",te,[t("div",ee,[e[32]||(e[32]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"การดำเนินการ",-1)),t("div",se,[b(x(g),{href:o.route("sales.receipt",s.sale.id),class:"w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-center block transition ease-in-out duration-150",style:{"background-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'",target:"_blank"},{default:u(()=>[...e[30]||(e[30]=[c(" พิมพ์ใบเสร็จ ",-1)])]),_:1},8,["href"]),o.$page.props.auth.user.role==="admin"||o.$page.props.auth.user.role==="manager"?(l(),h(x(g),{key:0,href:o.route("sales.edit",s.sale.id),class:"w-full text-white font-bold py-2 px-4 rounded text-center block transition ease-in-out duration-150",style:{"background-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:u(()=>[...e[31]||(e[31]=[c(" แก้ไขการขาย ",-1)])]),_:1},8,["href"])):i("",!0),o.$page.props.auth.user.role==="admin"?(l(),d("button",{key:1,onClick:e[0]||(e[0]=n=>D()),class:"w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"}," ลบการขาย ")):i("",!0)])])])])])])])]}),_:1}))}};export{re as default};

import{r as i,z as C,E as W,o as X,a as o,c as Y,w as M,M as N,d as t,e as u,f as V,s as U,v as R,g as a,t as n,F as m,h as x,m as Z,i as c,p as ee,P as q,n as A}from"./app-6a986ce6.js";import{A as te}from"./AppLayout-c0397362.js";import{J as D}from"./JsBarcode-7923fbe2.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css            */import"./ApplicationLogo-88d45659.js";const le={class:"py-12"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ae={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},re={class:"bg-white rounded-lg shadow-sm p-6"},de={class:"mb-4"},ne={class:"mb-4"},ie={class:"mb-4 space-y-2"},ue={class:"flex items-center"},ce={class:"flex items-center"},me={class:"flex items-center"},ve={class:"mb-4"},ge={class:"mb-4"},pe={class:"bg-white rounded-lg shadow-sm p-6 lg:col-span-2"},xe={class:"mb-4"},be={key:0,class:"mb-4"},fe={class:"text-sm font-medium text-gray-700 mb-2"},ye={class:"flex flex-wrap gap-2"},he=["onClick"],_e={class:"border rounded-lg overflow-hidden max-h-96 overflow-y-auto"},ke={class:"min-w-full divide-y divide-gray-200"},we={class:"bg-gray-50 sticky top-0"},Ce={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase w-10"},Be=["checked"],Se={class:"bg-white divide-y divide-gray-200"},Ve=["onClick"],Ue={class:"px-4 py-3"},$e=["checked","onClick"],Le={class:"px-4 py-3"},ze={class:"font-medium text-gray-900"},Pe={class:"px-4 py-3 text-sm text-gray-500"},Ee={class:"px-4 py-3 text-sm text-gray-500"},Te={class:"px-4 py-3 text-sm text-gray-900 text-right"},Me={class:"mt-6 bg-white rounded-lg shadow-sm p-6"},Ne={key:0,class:"text-xs font-medium text-center truncate w-full"},Re={key:1,class:"text-sm font-bold text-red-600"},qe={key:4,class:"text-xs text-gray-500"},Ae={id:"print-area",class:"hidden print:block"},De={key:0,class:"label-name"},Ie={key:1,class:"label-price"},Fe=["id"],Ke={key:2,class:"label-sku"},Qe={__name:"BarcodeLabel",props:{products:Array},setup(I){const $=I,b=i("medium"),v=i("barcode"),f=i(!0),y=i(!0),h=i(!1),_=i(1),k=i(3),w=i(""),r=i([]),B=i({}),F=i({}),g=C(()=>{if(!w.value)return $.products;const l=w.value.toLowerCase();return $.products.filter(e=>{var s,d;return e.name.toLowerCase().includes(l)||((s=e.sku)==null?void 0:s.toLowerCase().includes(l))||((d=e.barcode)==null?void 0:d.toLowerCase().includes(l))})}),L=C(()=>r.value.slice(0,6)),z=C(()=>g.value.length>0&&g.value.every(l=>r.value.some(e=>e.id===l.id))),P=C(()=>({small:"w-24 h-16",medium:"w-32 h-20",large:"w-44 h-28"})[b.value]),K=l=>r.value.some(e=>e.id===l),E=l=>{const e=r.value.findIndex(s=>s.id===l.id);e===-1?r.value.push(l):r.value.splice(e,1)},Q=l=>{r.value=r.value.filter(e=>e.id!==l)},j=()=>{z.value?r.value=r.value.filter(l=>!g.value.some(e=>e.id===l.id)):g.value.forEach(l=>{r.value.some(e=>e.id===l.id)||r.value.push(l)})},J=(l,e)=>{l&&(B.value[e]=l)},O=(l,e)=>{l&&(F.value[e]=l)},S=l=>l?new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(l):"0.00",T=()=>{N(()=>{L.value.forEach((l,e)=>{const s=l.barcode||l.sku||String(l.id);if(v.value==="barcode"&&B.value[e])try{D(B.value[e],s,{format:"CODE128",width:1.5,height:30,displayValue:!0,fontSize:10,margin:2})}catch(d){console.error("Barcode error:",d)}})})},H=()=>{if(r.value.length===0){alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸²à¸à¹ˆà¸­à¸™");return}N(()=>{r.value.forEach(l=>{for(let e=1;e<=_.value;e++){const s=document.getElementById(`print-barcode-${l.id}-${e}`);if(s){const d=l.barcode||l.sku||String(l.id);try{D(s,d,{format:"CODE128",width:1.5,height:30,displayValue:!0,fontSize:10,margin:2})}catch(p){console.error("Print barcode error:",p)}}}}),setTimeout(()=>{window.print()},300)})},G=()=>{};return W([r,v,b],T,{deep:!0}),X(()=>{T()}),(l,e)=>(o(),Y(te,{title:"à¸žà¸´à¸¡à¸žà¹Œà¸›à¹‰à¸²à¸¢ Barcode"},{header:M(()=>[...e[8]||(e[8]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"à¸žà¸´à¸¡à¸žà¹Œà¸›à¹‰à¸²à¸¢ Barcode",-1)])]),default:M(()=>[t("div",le,[t("div",oe,[t("div",ae,[t("div",re,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold mb-4"},"âš™ï¸ à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸›à¹‰à¸²à¸¢",-1)),t("div",de,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"à¸‚à¸™à¸²à¸”à¸›à¹‰à¸²à¸¢",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),class:"w-full rounded-lg border-gray-300"},[...e[9]||(e[9]=[t("option",{value:"small"},"à¹€à¸¥à¹‡à¸ (38x25mm)",-1),t("option",{value:"medium"},"à¸à¸¥à¸²à¸‡ (50x30mm)",-1),t("option",{value:"large"},"à¹ƒà¸«à¸à¹ˆ (70x40mm)",-1)])],512),[[V,b.value]])]),t("div",ne,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"à¸›à¸£à¸°à¹€à¸ à¸—",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),class:"w-full rounded-lg border-gray-300"},[...e[11]||(e[11]=[t("option",{value:"barcode"},"Barcode",-1),t("option",{value:"qrcode"},"QR Code",-1)])],512),[[V,v.value]])]),t("div",ie,[t("label",ue,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),class:"rounded border-gray-300 text-indigo-600"},null,512),[[U,f.value]]),e[13]||(e[13]=t("span",{class:"ml-2 text-sm"},"à¹à¸ªà¸”à¸‡à¸Šà¸·à¹ˆà¸­à¸ªà¸´à¸™à¸„à¹‰à¸²",-1))]),t("label",ce,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),class:"rounded border-gray-300 text-indigo-600"},null,512),[[U,y.value]]),e[14]||(e[14]=t("span",{class:"ml-2 text-sm"},"à¹à¸ªà¸”à¸‡à¸£à¸²à¸„à¸²",-1))]),t("label",me,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s),class:"rounded border-gray-300 text-indigo-600"},null,512),[[U,h.value]]),e[15]||(e[15]=t("span",{class:"ml-2 text-sm"},"à¹à¸ªà¸”à¸‡à¸£à¸«à¸±à¸ª SKU",-1))])]),t("div",ve,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"à¸ˆà¸³à¸™à¸§à¸™à¸›à¹‰à¸²à¸¢à¸•à¹ˆà¸­à¸ªà¸´à¸™à¸„à¹‰à¸²",-1)),u(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>_.value=s),type:"number",min:"1",max:"100",class:"w-full rounded-lg border-gray-300"},null,512),[[R,_.value,void 0,{number:!0}]])]),t("div",ge,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"à¸ˆà¸³à¸™à¸§à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ",-1)),u(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>k.value=s),class:"w-full rounded-lg border-gray-300"},[...e[17]||(e[17]=[t("option",{value:2},"2 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ",-1),t("option",{value:3},"3 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ",-1),t("option",{value:4},"4 à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ",-1)])],512),[[V,k.value]])]),t("button",{onClick:H,class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," ðŸ–¨ï¸ à¸žà¸´à¸¡à¸žà¹Œà¸›à¹‰à¸²à¸¢ ")]),t("div",pe,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold mb-4"},"ðŸ“¦ à¹€à¸¥à¸·à¸­à¸à¸ªà¸´à¸™à¸„à¹‰à¸²",-1)),t("div",xe,[u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>w.value=s),type:"text",placeholder:"à¸„à¹‰à¸™à¸«à¸²à¸ªà¸´à¸™à¸„à¹‰à¸² (à¸Šà¸·à¹ˆà¸­, SKU, Barcode)...",class:"w-full rounded-lg border-gray-300",onInput:G},null,544),[[R,w.value]])]),r.value.length>0?(o(),a("div",be,[t("h4",fe,"à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ ("+n(r.value.length)+")",1),t("div",ye,[(o(!0),a(m,null,x(r.value,s=>(o(),a("span",{key:s.id,class:"inline-flex items-center px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm"},[Z(n(s.name)+" ",1),t("button",{onClick:d=>Q(s.id),class:"ml-2 text-indigo-600 hover:text-indigo-800"},"Ã—",8,he)]))),128))])])):c("",!0),t("div",_e,[t("table",ke,[t("thead",we,[t("tr",null,[t("th",Ce,[t("input",{type:"checkbox",onChange:j,checked:z.value,class:"rounded border-gray-300 text-indigo-600"},null,40,Be)]),e[20]||(e[20]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"à¸ªà¸´à¸™à¸„à¹‰à¸²",-1)),e[21]||(e[21]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"SKU",-1)),e[22]||(e[22]=t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Barcode",-1)),e[23]||(e[23]=t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"à¸£à¸²à¸„à¸²",-1))])]),t("tbody",Se,[(o(!0),a(m,null,x(g.value,s=>(o(),a("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer",onClick:d=>E(s)},[t("td",Ue,[t("input",{type:"checkbox",checked:K(s.id),onClick:ee(d=>E(s),["stop"]),class:"rounded border-gray-300 text-indigo-600"},null,8,$e)]),t("td",Le,[t("div",ze,n(s.name),1)]),t("td",Pe,n(s.sku),1),t("td",Ee,n(s.barcode||"-"),1),t("td",Te,"à¸¿"+n(S(s.selling_price)),1)],8,Ve))),128))])])])])]),t("div",Me,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold mb-4"},"ðŸ‘ï¸ à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸›à¹‰à¸²à¸¢",-1)),t("div",{class:"flex flex-wrap gap-4 justify-center p-4 bg-gray-100 rounded-lg",style:q({gridTemplateColumns:`repeat(${k.value}, 1fr)`})},[(o(!0),a(m,null,x(L.value,(s,d)=>(o(),a("div",{key:d,class:A([P.value,"bg-white border-2 border-dashed border-gray-300 rounded p-2 flex flex-col items-center justify-center"])},[f.value?(o(),a("div",Ne,n(s.name),1)):c("",!0),y.value?(o(),a("div",Re,"à¸¿"+n(S(s.selling_price)),1)):c("",!0),v.value==="barcode"?(o(),a("svg",{key:2,ref_for:!0,ref:p=>J(p,d),class:"barcode-svg"},null,512)):(o(),a("canvas",{key:3,ref_for:!0,ref:p=>O(p,d),class:"qr-canvas"},null,512)),h.value?(o(),a("div",qe,n(s.sku),1)):c("",!0)],2))),128))],4)])])]),t("div",Ae,[t("div",{class:"print-grid",style:q({gridTemplateColumns:`repeat(${k.value}, 1fr)`})},[(o(!0),a(m,null,x(r.value,s=>(o(),a(m,{key:s.id},[(o(!0),a(m,null,x(_.value,d=>(o(),a("div",{key:`${s.id}-${d}`,class:A([P.value,"label-item"])},[f.value?(o(),a("div",De,n(s.name),1)):c("",!0),y.value?(o(),a("div",Ie,"à¸¿"+n(S(s.selling_price)),1)):c("",!0),(o(),a("svg",{id:`print-barcode-${s.id}-${d}`,class:"label-barcode"},null,8,Fe)),h.value?(o(),a("div",Ke,n(s.sku),1)):c("",!0)],2))),128))],64))),128))],4)])]),_:1}))}},Xe=se(Qe,[["__scopeId","data-v-22d36847"]]);export{Xe as default};

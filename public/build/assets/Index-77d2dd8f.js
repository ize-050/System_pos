import{A as U,C as z,o as G,D as P,E as L,a as n,c as q,w as i,G as g,d as t,j as l,m as x,k as p,x as m,e as T,v as J,f as K,g as h,h as Q,t as d,n as R,F as W,i as I}from"./app-cfb3a24f.js";import{A as X}from"./AppLayout-e7d94700.js";import{_ as Y}from"./Pagination-425d1bd0.js";import{t as c}from"./toastStore-c9588d95.js";/* empty css            */import"./ApplicationLogo-506cd769.js";import"./_plugin-vue_export-helper-c27b6911.js";const Z={class:"py-12"},tt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},et={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},st={class:"p-6 bg-white border-b border-gray-200"},ot={class:"mb-6 flex justify-between items-center"},rt={class:"flex gap-2"},at={class:"mb-6 flex flex-col sm:flex-row gap-4"},it={class:"flex-1"},nt={class:"w-full sm:w-48"},lt={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},ut={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-medium text-gray-900"},pt={class:"px-6 py-4"},mt=["title"],ht={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm text-gray-900"},gt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},yt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},wt={class:"flex items-center space-x-2"},kt=["onClick"],_t={key:0,class:"text-center py-12"},Bt={class:"mt-6"},Ct={key:1,class:"mt-6"},Ht={__name:"Index",props:{categories:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(a,{expose:O}){var C,E;const y=a,u=U(),r=z({search:((C=y.filters)==null?void 0:C.search)||"",status:((E=y.filters)==null?void 0:E.status)||""});G(()=>{var s,e;(s=u.props.flash)!=null&&s.success&&c.success(u.props.flash.success),(e=u.props.flash)!=null&&e.error&&c.error(u.props.flash.error)});const b=()=>{g.get(route("categories.index"),{...r},{preserveState:!0,replace:!0})},v=P.debounce(b,300);L(()=>r.search,()=>{v()}),L(()=>r.status,()=>{b()});const w=()=>{r.search="",r.status="",g.get(route("categories.index"))},k=s=>s?"bg-green-100 text-green-800":"bg-red-100 text-red-800",_=s=>{if(!s)return"ไม่ระบุ";try{return new Date(s).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})}catch{return"ไม่ระบุ"}},f=()=>{v()},B=s=>{if(s.products_count>0){c.error(`ไม่สามารถลบ "${s.name}" ได้ เนื่องจากมีสินค้า ${s.products_count} รายการ กรุณาย้ายหรือลบสินค้าก่อน`);return}confirm(`คุณแน่ใจหรือไม่ที่จะลบหมวดหมู่ "${s.name}"? การกระทำนี้ไม่สามารถยกเลิกได้`)&&g.delete(route("categories.destroy",s.id),{onSuccess:()=>{c.crud.deleted("หมวดหมู่")},onError:()=>{c.crud.deleteError("หมวดหมู่")}})};return O({form:r,clearFilters:w,getStatusClass:k,formatDate:_,search:f,deleteCategory:B}),(s,e)=>(n(),q(X,{title:"จัดการหมวดหมู่สินค้า"},{header:i(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," จัดการหมวดหมู่สินค้า ",-1)])]),default:i(()=>{var S,V,M,j,A,F,D,H,$,N;return[t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-900"},"จัดการหมวดหมู่สินค้า",-1)),t("div",rt,[l(p(m),{href:s.route("categories.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest transition ease-in-out duration-150",style:{"background-color":"#6B7B47","border-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:i(()=>[...e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" เพิ่มหมวดหมู่ใหม่ ",-1)])]),_:1},8,["href"])])]),t("div",at,[t("div",it,[T(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.search=o),onInput:f,type:"text",placeholder:"ค้นหาหมวดหมู่...",class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},null,544),[[J,r.search]])]),t("div",nt,[T(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.status=o),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...e[5]||(e[5]=[t("option",{value:""},"สถานะทั้งหมด",-1),t("option",{value:"active"},"ใช้งาน",-1),t("option",{value:"inactive"},"ไม่ใช้งาน",-1)])],544),[[K,r.status]])]),t("button",{onClick:w,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500"}," Clear ")]),t("div",lt,[t("table",dt,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ชื่อหมวดหมู่"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"คำอธิบาย"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"จำนวนสินค้า"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"สถานะ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"วันที่สร้าง"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"การจัดการ")])],-1)),t("tbody",ct,[(n(!0),h(W,null,Q(((S=a.categories)==null?void 0:S.data)||[],o=>(n(),h("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",ut,[t("div",xt,d(o.name),1)]),t("td",pt,[t("div",{class:"text-sm text-gray-900 max-w-xs truncate",title:o.description},d(o.description||"ไม่มีคำอธิบาย"),9,mt)]),t("td",ht,[t("div",ft,[t("span",gt,d(o.products_count)+" สินค้า ",1)])]),t("td",yt,[t("span",{class:R(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",k(o.is_active)])},d(o.is_active?"ใช้งาน":"ไม่ใช้งาน"),3)]),t("td",bt,d(_(o.created_at)),1),t("td",vt,[t("div",wt,[l(p(m),{href:s.route("categories.show",o.id),class:"text-blue-600 hover:text-blue-900 mr-3"},{default:i(()=>[...e[6]||(e[6]=[x(" ดู ",-1)])]),_:1},8,["href"]),l(p(m),{href:s.route("categories.edit",o.id),class:"text-indigo-600 hover:text-indigo-900 mr-3"},{default:i(()=>[...e[7]||(e[7]=[x(" แก้ไข ",-1)])]),_:1},8,["href"]),t("button",{onClick:Et=>B(o),class:"text-red-600 hover:text-red-900"}," ลบ ",8,kt)])])]))),128))])])]),(((V=a.categories)==null?void 0:V.data)||[]).length===0?(n(),h("div",_t,[e[10]||(e[10]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),e[11]||(e[11]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"ไม่พบหมวดหมู่สินค้า",-1)),e[12]||(e[12]=t("p",{class:"mt-1 text-sm text-gray-500"},"เริ่มต้นด้วยการสร้างหมวดหมู่สินค้าใหม่",-1)),t("div",Bt,[l(p(m),{href:s.route("categories.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest transition ease-in-out duration-150",style:{"background-color":"#6B7B47","border-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:i(()=>[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),x(" เพิ่มหมวดหมู่ ",-1)])]),_:1},8,["href"])])])):I("",!0),(((M=a.categories)==null?void 0:M.data)||[]).length>0?(n(),h("div",Ct,[l(Y,{links:((j=a.categories)==null?void 0:j.links)||[],from:((F=(A=a.categories)==null?void 0:A.meta)==null?void 0:F.from)||0,to:((H=(D=a.categories)==null?void 0:D.meta)==null?void 0:H.to)||0,total:((N=($=a.categories)==null?void 0:$.meta)==null?void 0:N.total)||0},null,8,["links","from","to","total"])])):I("",!0)])])])])]}),_:1}))}};export{Ht as default};

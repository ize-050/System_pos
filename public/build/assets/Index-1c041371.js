import{a as c,g as f,y as E,r as y,u as H,D as L,c as N,w as n,x as h,d as t,j as d,m as u,k as b,t as o,e as C,v as O,f as B,h as I,i as U,n as v,F as P,E as q}from"./app-3d7f0e19.js";import{A as S}from"./AppLayout-daa2be83.js";import{_ as M}from"./Pagination-a1b7164c.js";import{C as F}from"./ConfirmationModal-ccf9fdfc.js";/* empty css            */import"./ApplicationLogo-2b775c7a.js";import"./_plugin-vue_export-helper-c27b6911.js";const G=["type"],D={__name:"SecondaryButton",props:{type:{type:String,default:"button"}},setup(r){return(a,i)=>(c(),f("button",{type:r.type,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:text-gray-500 focus:outline-none disabled:opacity-25 transition ease-in-out duration-150",style:{"border-color":"#E2E8F0",color:"#2D3748"},onmouseover:"this.style.color='#4A5568'",onmouseout:"this.style.color='#2D3748'",onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[E(a.$slots,"default")],8,G))}},J=["type"],j={__name:"DangerButton",props:{type:{type:String,default:"button"}},setup(r){return(a,i)=>(c(),f("button",{type:r.type,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:border-red-700 focus:shadow-outline-red disabled:opacity-25 transition ease-in-out duration-150"},[E(a.$slots,"default")],8,J))}},K={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},W={class:"p-6 bg-white border-b border-gray-200"},X={class:"mb-6 flex justify-between items-center"},Y={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},Z={class:"bg-blue-50 p-4 rounded-lg"},tt={class:"flex items-center"},et={class:"ml-4"},st={class:"text-2xl font-bold text-blue-900"},ot={class:"bg-green-50 p-4 rounded-lg"},lt={class:"flex items-center"},rt={class:"ml-4"},nt={class:"text-2xl font-bold text-green-900"},at={class:"bg-yellow-50 p-4 rounded-lg"},it={class:"flex items-center"},dt={class:"ml-4"},ut={class:"text-2xl font-bold text-yellow-900"},ct={class:"bg-purple-50 p-4 rounded-lg"},pt={class:"flex items-center"},xt={class:"ml-4"},mt={class:"text-2xl font-bold text-purple-900"},gt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},yt={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},ft={class:"bg-white divide-y divide-gray-200"},vt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm font-medium text-gray-900"},_t={key:0,class:"text-sm text-gray-500"},kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Dt={class:"flex space-x-2"},jt=["onClick"],$t={class:"mt-6"},Vt={components:{AppLayout:S,Link:h,Pagination:M,ConfirmationModal:F,SecondaryButton:D,DangerButton:j}},It=Object.assign(Vt,{__name:"Index",props:{customers:Object,filters:Object,stats:Object},setup(r){const a=r,i=y(a.filters.search||""),p=y(a.filters.customer_type||""),x=y(a.filters.is_active||""),m=y(!1),g=y(null),w=H({});L([i,p,x],()=>{q.get(route("customers.index"),{search:i.value,customer_type:p.value,is_active:x.value},{preserveState:!0,replace:!0})},{debounce:300});const $=()=>{i.value="",p.value="",x.value=""},_=l=>new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(l||0),V=l=>({individual:"บุคคลธรรมดา",company:"บริษัท",contractor:"ผู้รับเหมา"})[l]||l,T=l=>({individual:"bg-blue-100 text-blue-800",company:"bg-green-100 text-green-800",contractor:"bg-purple-100 text-purple-800"})[l]||"bg-gray-100 text-gray-800",z=l=>{g.value=l,m.value=!0},A=()=>{w.delete(route("customers.destroy",g.value.id),{onSuccess:()=>{m.value=!1,g.value=null}})};return(l,e)=>(c(),N(S,{title:"จัดการลูกค้า"},{header:n(()=>[...e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," จัดการลูกค้า ",-1)])]),default:n(()=>[t("div",K,[t("div",Q,[t("div",R,[t("div",W,[t("div",X,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold text-gray-900"},"จัดการลูกค้า",-1)),d(b(h),{href:l.route("customers.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest disabled:opacity-25 transition ease-in-out duration-150",style:{"background-color":"#6B7B47"},onmouseover:"this.style.backgroundColor='#8A9B5A'",onmouseout:"this.style.backgroundColor='#6B7B47'"},{default:n(()=>[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" เพิ่มลูกค้าใหม่ ",-1)])]),_:1},8,["href"])]),t("div",Y,[t("div",Z,[t("div",tt,[e[9]||(e[9]=t("div",{class:"p-2 bg-blue-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",et,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-blue-600"},"ลูกค้าทั้งหมด",-1)),t("p",st,o(r.stats.total_customers),1)])])]),t("div",ot,[t("div",lt,[e[11]||(e[11]=t("div",{class:"p-2 bg-green-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",rt,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-green-600"},"ลูกค้าที่ใช้งาน",-1)),t("p",nt,o(r.stats.active_customers),1)])])]),t("div",at,[t("div",it,[e[13]||(e[13]=t("div",{class:"p-2 bg-yellow-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),t("div",dt,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-yellow-600"},"ยอดค้างชำระ",-1)),t("p",ut,"฿"+o(_(r.stats.total_balance)),1)])])]),t("div",ct,[t("div",pt,[e[15]||(e[15]=t("div",{class:"p-2 bg-purple-100 rounded-lg"},[t("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1)),t("div",xt,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-purple-600"},"วงเงินเครดิต",-1)),t("p",mt,"฿"+o(_(r.stats.total_credit_limit)),1)])])])]),t("div",gt,[t("div",null,[C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),type:"text",placeholder:"ค้นหาลูกค้า...",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},null,512),[[O,i.value]])]),t("div",null,[C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...e[16]||(e[16]=[t("option",{value:""},"ประเภททั้งหมด",-1),t("option",{value:"individual"},"บุคคลธรรมดา",-1),t("option",{value:"company"},"บริษัท",-1),t("option",{value:"contractor"},"ผู้รับเหมา",-1)])],512),[[B,p.value]])]),t("div",null,[C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>x.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none transition ease-in-out duration-150",style:{"border-color":"#E2E8F0"},onfocus:"this.style.borderColor='#6B7B47'; this.style.boxShadow='0 0 0 3px rgba(107, 123, 71, 0.2)'",onblur:"this.style.borderColor='#E2E8F0'; this.style.boxShadow='none'"},[...e[17]||(e[17]=[t("option",{value:""},"สถานะทั้งหมด",-1),t("option",{value:"1"},"ใช้งาน",-1),t("option",{value:"0"},"ไม่ใช้งาน",-1)])],512),[[B,x.value]])]),t("div",null,[t("button",{onClick:$,class:"w-full px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-150 ease-in-out"}," ล้างตัวกรอง ")])]),t("div",yt,[t("table",bt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," รหัสลูกค้า "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ชื่อลูกค้า "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," เบอร์โทร "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Line ID "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ประเภท "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ยอดค้างชำระ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," จำนวนคำสั่งซื้อ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," สถานะ "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," การจัดการ ")])],-1)),t("tbody",ft,[(c(!0),f(P,null,I(r.customers.data,s=>(c(),f("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",vt,o(s.customer_code),1),t("td",ht,[t("div",wt,o(s.name||s.company_name),1),s.email?(c(),f("div",_t,o(s.email),1)):U("",!0)]),t("td",kt,o(s.phone),1),t("td",Ct,o(s.line_id||"-"),1),t("td",Bt,[t("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",T(s.customer_type)])},o(V(s.customer_type)),3)]),t("td",Et,[t("span",{class:v(s.current_balance>0?"text-red-600 font-semibold":"text-gray-900")}," ฿"+o(_(s.current_balance)),3)]),t("td",St,o(s.sales_count),1),t("td",Mt,[t("span",{class:v(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(s.is_active?"ใช้งาน":"ไม่ใช้งาน"),3)]),t("td",Ft,[t("div",Dt,[d(b(h),{href:l.route("customers.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:n(()=>[...e[18]||(e[18]=[u(" ดู ",-1)])]),_:1},8,["href"]),d(b(h),{href:l.route("customers.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:n(()=>[...e[19]||(e[19]=[u(" แก้ไข ",-1)])]),_:1},8,["href"]),t("button",{onClick:k=>z(s),class:"text-red-600 hover:text-red-900"}," ลบ ",8,jt)])])]))),128))])])]),t("div",$t,[d(M,{links:r.customers.links},null,8,["links"])])])])])]),d(F,{show:m.value,onClose:e[4]||(e[4]=s=>m.value=!1)},{title:n(()=>[...e[21]||(e[21]=[u(" ยืนยันการลบลูกค้า ",-1)])]),content:n(()=>{var s,k;return[u(' คุณแน่ใจหรือไม่ที่จะลบลูกค้า "'+o(((s=g.value)==null?void 0:s.name)||((k=g.value)==null?void 0:k.company_name))+'"? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ',1)]}),footer:n(()=>[d(D,{onClick:e[3]||(e[3]=s=>m.value=!1)},{default:n(()=>[...e[22]||(e[22]=[u(" ยกเลิก ",-1)])]),_:1}),d(j,{class:v(["ml-3",{"opacity-25":b(w).processing}]),onClick:A,disabled:b(w).processing},{default:n(()=>[...e[23]||(e[23]=[u(" ลบลูกค้า ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["show"])]),_:1}))}});export{It as default};

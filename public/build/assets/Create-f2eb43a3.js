import{u as j,z as _,a as u,c as A,w as v,d as t,p as S,e as r,f as k,k as d,g as i,h as f,t as a,F as g,v as p,s as T,j as B,m as F,x as I}from"./app-52dfa1a6.js";import{A as M}from"./AppLayout-39f8b0fe.js";/* empty css            */import"./ApplicationLogo-8547e154.js";import"./_plugin-vue_export-helper-c27b6911.js";const N={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white overflow-hidden shadow-sm rounded-lg p-6"},L={class:"mb-4"},$=["value"],z={class:"grid grid-cols-2 gap-4 mb-4"},E={class:"mb-4"},O=["onUpdate:modelValue","onChange"],P=["value"],G=["onUpdate:modelValue"],J=["onUpdate:modelValue"],K={class:"py-2"},Q=["onClick"],R={class:"border-t pt-4 mb-4"},W={class:"flex justify-end gap-4 text-sm"},X={class:"text-right space-y-2"},Y={class:"flex justify-between gap-4"},Z={class:"flex justify-between gap-4 items-center"},tt={class:"flex justify-between gap-4 items-center"},et={class:"flex items-center gap-2"},st={class:"flex justify-between gap-4 text-lg font-bold border-t pt-2"},ot={class:"mb-4"},dt={class:"flex justify-end gap-2"},lt=["disabled"],pt={__name:"Create",props:{suppliers:Array,products:Array},setup(c){const w=c,s=j({supplier_id:"",order_date:new Date().toISOString().split("T")[0],expected_delivery_date:"",items:[{product_id:"",product_name:"",quantity_ordered:1,unit_price:0}],discount_amount:0,include_vat:!0,notes:""}),V=()=>{s.items.push({product_id:"",product_name:"",quantity_ordered:1,unit_price:0})},h=n=>{s.items.splice(n,1)},U=n=>{const e=w.products.find(o=>o.id===s.items[n].product_id);e&&(s.items[n].product_name=e.name,s.items[n].unit_price=e.cost_price||0)},b=_(()=>s.items.reduce((n,e)=>n+e.quantity_ordered*e.unit_price,0)),x=_(()=>s.include_vat?(b.value-s.discount_amount)*.07:0),C=_(()=>b.value-s.discount_amount+x.value),m=n=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(n||0),q=()=>{s.post(route("purchase-orders.store"),{preserveScroll:!1,onFinish:()=>{s.processing=!1}})};return(n,e)=>(u(),A(M,{title:"สร้างใบสั่งซื้อ"},{header:v(()=>[...e[6]||(e[6]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"สร้างใบสั่งซื้อ",-1)])]),default:v(()=>[t("div",N,[t("div",D,[t("div",H,[e[19]||(e[19]=t("h2",{class:"text-2xl font-bold mb-6"},"สร้างใบสั่งซื้อ",-1)),t("form",{onSubmit:S(q,["prevent"])},[t("div",L,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"ซัพพลายเออร์ *",-1)),r(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>d(s).supplier_id=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300"},[e[7]||(e[7]=t("option",{value:""},"เลือกซัพพลายเออร์",-1)),(u(!0),i(g,null,f(c.suppliers,o=>(u(),i("option",{key:o.id,value:o.id},a(o.name),9,$))),128))],512),[[k,d(s).supplier_id]])]),t("div",z,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"วันที่สั่งซื้อ *",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>d(s).order_date=o),type:"date",required:"",class:"mt-1 block w-full rounded-md border-gray-300"},null,512),[[p,d(s).order_date]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"วันที่คาดว่าจะได้รับ",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>d(s).expected_delivery_date=o),type:"date",class:"mt-1 block w-full rounded-md border-gray-300"},null,512),[[p,d(s).expected_delivery_date]])])]),t("div",E,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"รายการสินค้า *",-1)),(u(!0),i(g,null,f(d(s).items,(o,y)=>(u(),i("div",{key:y,class:"flex gap-2 mb-2"},[r(t("select",{"onUpdate:modelValue":l=>o.product_id=l,onChange:l=>U(y),class:"flex-1 rounded-md border-gray-300"},[e[11]||(e[11]=t("option",{value:""},"เลือกสินค้า",-1)),(u(!0),i(g,null,f(c.products,l=>(u(),i("option",{key:l.id,value:l.id},a(l.name)+" ("+a(l.sku)+") ",9,P))),128))],40,O),[[k,o.product_id]]),r(t("input",{"onUpdate:modelValue":l=>o.quantity_ordered=l,type:"number",min:"1",placeholder:"จำนวน",class:"w-24 rounded-md border-gray-300"},null,8,G),[[p,o.quantity_ordered,void 0,{number:!0}]]),r(t("input",{"onUpdate:modelValue":l=>o.unit_price=l,type:"number",step:"0.01",placeholder:"ราคา",class:"w-32 rounded-md border-gray-300"},null,8,J),[[p,o.unit_price,void 0,{number:!0}]]),t("span",K,a(m(o.quantity_ordered*o.unit_price)),1),t("button",{type:"button",onClick:l=>h(y),class:"text-red-600"},"ลบ",8,Q)]))),128)),t("button",{type:"button",onClick:V,class:"mt-2 text-indigo-600"},"+ เพิ่มสินค้า")]),t("div",R,[t("div",W,[t("div",X,[t("div",Y,[e[13]||(e[13]=t("span",null,"Subtotal:",-1)),t("span",null,a(m(b.value)),1)]),t("div",Z,[e[14]||(e[14]=t("span",null,"ส่วนลด:",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>d(s).discount_amount=o),type:"number",step:"0.01",min:"0",class:"w-32 rounded-md border-gray-300 text-sm text-right"},null,512),[[p,d(s).discount_amount,void 0,{number:!0}]])]),t("div",tt,[t("label",et,[r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>d(s).include_vat=o),type:"checkbox",class:"rounded border-gray-300"},null,512),[[T,d(s).include_vat]]),e[15]||(e[15]=t("span",null,"รวม VAT 7%:",-1))]),t("span",null,a(d(s).include_vat?m(x.value):m(0)),1)]),t("div",st,[e[16]||(e[16]=t("span",null,"Total:",-1)),t("span",null,a(m(C.value)),1)])])])]),t("div",ot,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"หมายเหตุ",-1)),r(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>d(s).notes=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300"},null,512),[[p,d(s).notes]])]),t("div",dt,[B(d(I),{href:n.route("purchase-orders.index"),class:"px-4 py-2 bg-gray-300 rounded-md"},{default:v(()=>[...e[18]||(e[18]=[F("ยกเลิก",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:d(s).processing,class:"px-4 py-2 bg-indigo-600 text-white rounded-md disabled:opacity-50"},"สร้างใบสั่งซื้อ",8,lt)])],32)])])])]),_:1}))}};export{pt as default};

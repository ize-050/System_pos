import{a as d,c as R,w as c,d as t,g as o,t as r,i as l,m as g,j as b,k as h,x as v,n as w,h as V,F,E as x}from"./app-68daac91.js";import{A as $}from"./AppLayout-ea36af8e.js";/* empty css            */import"./ApplicationLogo-9b15c312.js";import"./_plugin-vue_export-helper-c27b6911.js";const z={class:"py-12"},T={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},A={key:0,class:"mb-4 p-4 bg-green-100 text-green-700 rounded-lg"},E={key:1,class:"mb-4 p-4 bg-red-100 text-red-700 rounded-lg"},M={class:"bg-white rounded-lg shadow overflow-hidden"},q={class:"p-6 border-b"},O={class:"flex justify-between items-start"},G={class:"text-2xl font-bold text-gray-900"},I={class:"text-gray-500 mt-1"},J={class:"p-6 grid grid-cols-2 md:grid-cols-4 gap-4 bg-gray-50"},K={class:"font-medium"},P={class:"font-medium"},Q={class:"font-medium"},U={class:"font-medium"},W={key:0,class:"p-6 border-t"},X={class:"font-medium text-gray-900"},Y={class:"p-6 border-t"},Z={class:"min-w-full divide-y divide-gray-200"},tt={class:"divide-y divide-gray-200"},et={class:"px-4 py-3"},st={class:"font-medium"},nt={class:"px-4 py-3 text-center"},rt={class:"px-4 py-3 text-right"},dt={class:"px-4 py-3 text-right font-medium"},ot={class:"px-4 py-3 text-center"},at={class:"px-4 py-3 text-center"},lt={key:0,class:"text-green-600"},it={key:1,class:"text-gray-400"},ut={class:"p-6 border-t bg-gray-50"},ct={class:"flex justify-end"},gt={class:"w-64 space-y-2"},xt={class:"flex justify-between text-sm"},ft={key:0,class:"flex justify-between text-sm"},pt={class:"flex justify-between text-lg font-bold border-t pt-2"},mt={class:"text-red-600"},yt={key:1,class:"p-6 border-t"},bt={class:"text-gray-700 whitespace-pre-line"},ht={class:"p-6 border-t flex justify-between items-center"},vt={class:"flex gap-2"},Lt={__name:"Show",props:{refund:Object},setup(n){const u=n,i=s=>parseFloat(s||0).toLocaleString("th-TH",{minimumFractionDigits:2}),_=s=>s?new Date(s).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",k=s=>({pending:"รอดำเนินการ",approved:"อนุมัติแล้ว",completed:"เสร็จสิ้น",rejected:"ปฏิเสธ"})[s]||s,j=s=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",C=s=>({cash:"เงินสด",transfer:"โอนเงิน",credit_card:"บัตรเครดิต",store_credit:"เครดิตร้าน"})[s]||s,L=s=>({good:"สภาพดี",damaged:"เสียหาย",defective:"ชำรุด"})[s]||s||"-",S=s=>({good:"bg-green-100 text-green-800",damaged:"bg-orange-100 text-orange-800",defective:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",B=()=>{window.open(route("refunds.print",u.refund.id),"_blank")},D=()=>{confirm("ยืนยันการอนุมัติใบคืนสินค้านี้?")&&x.post(route("refunds.approve",u.refund.id))},H=()=>{confirm("ยืนยันการดำเนินการคืนเงินและคืนสต็อก?")&&x.post(route("refunds.complete",u.refund.id))},N=()=>{const s=prompt("กรุณาระบุเหตุผลในการปฏิเสธ:");s!==null&&x.post(route("refunds.reject",u.refund.id),{reject_reason:s})};return(s,e)=>(d(),R($,{title:"รายละเอียดใบคืนสินค้า"},{header:c(()=>[...e[0]||(e[0]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"รายละเอียดใบคืนสินค้า",-1)])]),default:c(()=>{var f,p,m,y;return[t("div",z,[t("div",T,[(f=s.$page.props.flash)!=null&&f.success?(d(),o("div",A,r(s.$page.props.flash.success),1)):l("",!0),(p=s.$page.props.flash)!=null&&p.error?(d(),o("div",E,r(s.$page.props.flash.error),1)):l("",!0),t("div",M,[t("div",q,[t("div",O,[t("div",null,[t("h1",G,r(n.refund.refund_number),1),t("p",I,[e[1]||(e[1]=g(" บิลอ้างอิง: ",-1)),b(h(v),{href:s.route("sales.show",n.refund.sale_id),class:"text-blue-600 hover:underline"},{default:c(()=>{var a;return[g(r((a=n.refund.sale)==null?void 0:a.sale_number),1)]}),_:1},8,["href"])])]),t("span",{class:w([j(n.refund.status),"px-4 py-2 rounded-full text-sm font-medium"])},r(k(n.refund.status)),3)])]),t("div",J,[t("div",null,[e[2]||(e[2]=t("div",{class:"text-sm text-gray-500"},"วันที่คืน",-1)),t("div",K,r(_(n.refund.refund_date)),1)]),t("div",null,[e[3]||(e[3]=t("div",{class:"text-sm text-gray-500"},"ลูกค้า",-1)),t("div",P,r(((m=n.refund.customer)==null?void 0:m.name)||"ลูกค้าทั่วไป"),1)]),t("div",null,[e[4]||(e[4]=t("div",{class:"text-sm text-gray-500"},"วิธีคืนเงิน",-1)),t("div",Q,r(C(n.refund.refund_method)),1)]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-sm text-gray-500"},"ผู้ทำรายการ",-1)),t("div",U,r(((y=n.refund.processed_by_user)==null?void 0:y.name)||"-"),1)])]),n.refund.reason?(d(),o("div",W,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500 mb-1"},"เหตุผลการคืน",-1)),t("div",X,r(n.refund.reason),1)])):l("",!0),t("div",Y,[e[8]||(e[8]=t("h3",{class:"font-medium text-gray-900 mb-4"},"รายการสินค้าที่คืน",-1)),t("table",Z,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"สินค้า"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"จำนวน"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"ราคา/หน่วย"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"รวม"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"สภาพ"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"คืนสต็อก")])],-1)),t("tbody",tt,[(d(!0),o(F,null,V(n.refund.items,a=>(d(),o("tr",{key:a.id},[t("td",et,[t("div",st,r(a.product_name),1)]),t("td",nt,r(a.quantity),1),t("td",rt,"฿"+r(i(a.unit_price)),1),t("td",dt,"฿"+r(i(a.total_price)),1),t("td",ot,[t("span",{class:w([S(a.condition),"px-2 py-1 text-xs rounded"])},r(L(a.condition)),3)]),t("td",at,[a.return_to_stock?(d(),o("span",lt,"✓")):(d(),o("span",it,"-"))])]))),128))])])]),t("div",ut,[t("div",ct,[t("div",gt,[t("div",xt,[e[9]||(e[9]=t("span",null,"ยอดรวม:",-1)),t("span",null,"฿"+r(i(n.refund.subtotal)),1)]),n.refund.tax_amount>0?(d(),o("div",ft,[e[10]||(e[10]=t("span",null,"ภาษี:",-1)),t("span",null,"฿"+r(i(n.refund.tax_amount)),1)])):l("",!0),t("div",pt,[e[11]||(e[11]=t("span",null,"ยอดคืนทั้งหมด:",-1)),t("span",mt,"฿"+r(i(n.refund.total_amount)),1)])])])]),n.refund.notes?(d(),o("div",yt,[e[12]||(e[12]=t("div",{class:"text-sm text-gray-500 mb-1"},"หมายเหตุ",-1)),t("div",bt,r(n.refund.notes),1)])):l("",!0),t("div",ht,[b(h(v),{href:s.route("refunds.index"),class:"text-gray-600 hover:text-gray-800"},{default:c(()=>[...e[13]||(e[13]=[g(" ← กลับไปรายการ ",-1)])]),_:1},8,["href"]),t("div",vt,[t("button",{onClick:B,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2"},[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),g(" พิมพ์ ",-1)])]),n.refund.status==="pending"?(d(),o("button",{key:0,onClick:D,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," อนุมัติ ")):l("",!0),n.refund.status==="pending"||n.refund.status==="approved"?(d(),o("button",{key:1,onClick:H,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," ดำเนินการคืนเงิน ")):l("",!0),n.refund.status==="pending"?(d(),o("button",{key:2,onClick:N,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," ปฏิเสธ ")):l("",!0)])])])])])]}),_:1}))}};export{Lt as default};

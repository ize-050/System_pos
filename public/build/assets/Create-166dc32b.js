import{u as N,r as f,z as L,a as n,c as B,w as y,d as t,j as v,m as h,k as r,x as k,p as D,e as d,v as u,g as i,t as a,i as c,F as w,h as q}from"./app-68daac91.js";import{A}from"./AppLayout-ea36af8e.js";/* empty css            */import"./ApplicationLogo-9b15c312.js";import"./_plugin-vue_export-helper-c27b6911.js";const $={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"bg-white rounded-lg shadow-sm p-6"},P={class:"flex justify-between items-center mb-6"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},H={key:0,class:"text-red-500 text-sm mt-1"},K={key:0,class:"text-red-500 text-sm mt-1"},O={class:"md:col-span-2"},R={class:"mb-8"},G={class:"mb-4"},J={class:"relative"},Q={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},W=["onClick"],X={class:"flex justify-between"},Y={class:"font-medium"},Z={class:"text-gray-500 text-sm ml-2"},tt={class:"text-right"},et={class:"text-sm text-gray-600"},st={class:"text-xs text-gray-500"},ot={class:"border rounded-lg overflow-hidden"},rt={class:"min-w-full divide-y divide-gray-200"},lt={class:"bg-white divide-y divide-gray-200"},at={class:"px-4 py-3"},nt={class:"font-medium"},it={class:"text-sm text-gray-500"},dt={class:"px-4 py-3"},ut=["onUpdate:modelValue","max","onInput"],mt={class:"text-xs text-gray-500 text-center"},pt={class:"px-4 py-3 text-right"},ct={class:"px-4 py-3 text-right font-medium"},xt={class:"px-4 py-3 text-center"},gt=["onClick"],yt={key:0},_t={class:"bg-gray-50"},bt={class:"px-4 py-3 text-right font-bold text-lg text-indigo-600"},ft={key:0,class:"text-red-500 text-sm mt-2"},vt={class:"mb-8"},ht={class:"flex justify-end gap-4"},kt=["disabled"],Ft={__name:"Create",props:{products:Array},setup(V){const C=V,o=N({requisition_date:new Date().toISOString().split("T")[0],requester_name:"",department:"",project_name:"",reason:"",notes:"",items:[]}),m=f(""),p=f([]);let b=null;const U=()=>{clearTimeout(b),b=setTimeout(()=>{if(m.value.length<1){p.value=[];return}const l=m.value.toLowerCase();p.value=C.products.filter(e=>(e.name.toLowerCase().includes(l)||e.sku.toLowerCase().includes(l))&&!o.items.some(s=>s.product_id===e.id)).slice(0,10)},200)},F=l=>{o.items.push({product_id:l.id,product_name:l.name,product_sku:l.sku,quantity:1,cost_price:parseFloat(l.cost_price),total_cost:parseFloat(l.cost_price),max_stock:l.current_stock,unit:l.unit}),m.value="",p.value=[]},T=l=>{o.items.splice(l,1)},j=l=>{const e=o.items[l];e.quantity>e.max_stock&&(e.quantity=e.max_stock),e.quantity<1&&(e.quantity=1),e.total_cost=e.quantity*e.cost_price},I=L(()=>o.items.reduce((l,e)=>l+e.total_cost,0)),x=l=>l?new Intl.NumberFormat("th-TH",{minimumFractionDigits:2}).format(l):"0.00",S=()=>{o.post(route("stock-requisitions.store"),{preserveScroll:!1,onFinish:()=>{o.processing=!1}})};return(l,e)=>(n(),B(A,{title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{header:y(()=>[...e[7]||(e[7]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)])]),default:y(()=>[t("div",$,[t("div",z,[t("div",M,[t("div",P,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-gray-900"},"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",-1)),v(r(k),{href:l.route("stock-requisitions.index"),class:"text-gray-600 hover:text-gray-900"},{default:y(()=>[...e[8]||(e[8]=[h(" ‚Üê ‡∏Å‡∏•‡∏±‡∏ö ",-1)])]),_:1},8,["href"])]),t("form",{onSubmit:D(S,["prevent"])},[t("div",E,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å *",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r(o).requisition_date=s),type:"date",required:"",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).requisition_date]]),r(o).errors.requisition_date?(n(),i("p",H,a(r(o).errors.requisition_date),1)):c("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å *",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r(o).requester_name=s),type:"text",required:"",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).requester_name]]),r(o).errors.requester_name?(n(),i("p",K,a(r(o).errors.requester_name),1)):c("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÅ‡∏ú‡∏ô‡∏Å",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r(o).department=s),type:"text",placeholder:"‡πÅ‡∏ú‡∏ô‡∏Å/‡∏ù‡πà‡∏≤‡∏¢",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).department]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£/‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r(o).project_name=s),type:"text",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).project_name]])]),t("div",O,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å",-1)),d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>r(o).reason=s),rows:"2",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏¥‡∏Å",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).reason]])])]),t("div",R,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold mb-4"},"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",-1)),t("div",G,[t("div",J,[d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>m.value=s),type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ä‡∏∑‡πà‡∏≠, SKU)...",class:"w-full rounded-lg border-gray-300 pr-10",onInput:U},null,544),[[u,m.value]]),p.value.length>0?(n(),i("div",Q,[(n(!0),i(w,null,q(p.value,s=>(n(),i("div",{key:s.id,onClick:g=>F(s),class:"p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0"},[t("div",X,[t("div",null,[t("span",Y,a(s.name),1),t("span",Z,"("+a(s.sku)+")",1)]),t("div",tt,[t("div",et,"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô: ‡∏ø"+a(x(s.cost_price)),1),t("div",st,"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: "+a(s.current_stock)+" "+a(s.unit),1)])])],8,W))),128))])):c("",!0)])]),t("div",ot,[t("table",rt,[e[18]||(e[18]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase w-32"},"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase w-32"},"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏∏‡∏ô"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase w-32"},"‡∏£‡∏ß‡∏°"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20"},"‡∏•‡∏ö")])],-1)),t("tbody",lt,[(n(!0),i(w,null,q(r(o).items,(s,g)=>(n(),i("tr",{key:g},[t("td",at,[t("div",nt,a(s.product_name),1),t("div",it,a(s.product_sku),1)]),t("td",dt,[d(t("input",{"onUpdate:modelValue":_=>s.quantity=_,type:"number",min:"1",max:s.max_stock,class:"w-full text-center rounded border-gray-300",onInput:_=>j(g)},null,40,ut),[[u,s.quantity,void 0,{number:!0}]]),t("div",mt,"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: "+a(s.max_stock),1)]),t("td",pt," ‡∏ø"+a(x(s.cost_price)),1),t("td",ct," ‡∏ø"+a(x(s.total_cost)),1),t("td",xt,[t("button",{type:"button",onClick:_=>T(g),class:"text-red-600 hover:text-red-900"}," üóëÔ∏è ",8,gt)])]))),128)),r(o).items.length===0?(n(),i("tr",yt,[...e[15]||(e[15]=[t("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"}," ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ",-1)])])):c("",!0)]),t("tfoot",_t,[t("tr",null,[e[16]||(e[16]=t("td",{colspan:"3",class:"px-4 py-3 text-right font-semibold"},"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:",-1)),t("td",bt," ‡∏ø"+a(x(I.value)),1),e[17]||(e[17]=t("td",null,null,-1))])])])]),r(o).errors.items?(n(),i("p",ft,a(r(o).errors.items),1)):c("",!0)]),t("div",vt,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",-1)),d(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>r(o).notes=s),rows:"2",placeholder:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",class:"w-full rounded-lg border-gray-300"},null,512),[[u,r(o).notes]])]),t("div",ht,[v(r(k),{href:l.route("stock-requisitions.index"),class:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"},{default:y(()=>[...e[21]||(e[21]=[h(" ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:r(o).processing||r(o).items.length===0,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},a(r(o).processing?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å"),9,kt)])],32)])])])]),_:1}))}};export{Ft as default};
